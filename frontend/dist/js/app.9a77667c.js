(function(){"use strict";var t={7254:function(t,a,e){var s=e(5130),l=e(6768);const o={class:"container"};function n(t,a,e,s,n,r){const c=(0,l.g2)("MainMenu"),i=(0,l.g2)("router-view");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(c),(0,l.Lk)("div",o,[(0,l.bF)(i)])],64)}var r=e(4232);const c={class:"navbar navbar-expand-lg bg-success bg-opacity-25"},i={class:"container-fluid"},d=(0,l.Lk)("a",{class:"navbar-brand",href:"#"},"KU_Shop",-1),m=(0,l.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,l.Lk)("span",{class:"navbar-toggler-icon"})],-1),u={class:"collapse navbar-collapse",id:"navbarNav"},h={class:"navbar-nav"},k={class:"nav-item"},g=(0,l.Lk)("div",{class:"nav-link"},"Home",-1),p={key:0,class:"nav-item"},b=(0,l.Lk)("div",{class:"nav-link"},"Login",-1),v={key:1,class:"nav-item"},L=(0,l.Lk)("div",{class:"nav-link"},"Logout",-1),f=[L],y={class:"nav-item"},w={class:"nav-link fw-bold"},C={class:"nav-item"},_=(0,l.Lk)("div",{class:"nav-link fw-bold"},"Cart",-1),E={class:"text-end pe-3"};function x(t,a,e,s,o,n){const L=(0,l.g2)("router-link"),x=(0,l.g2)("CartInfo");return(0,l.uX)(),(0,l.CE)("nav",c,[(0,l.Lk)("div",i,[d,m,(0,l.Lk)("div",u,[(0,l.Lk)("ul",h,[(0,l.Lk)("li",k,[(0,l.bF)(L,{to:"/",style:{"text-decoration":"none"}},{default:(0,l.k6)((()=>[g])),_:1})]),null===o.memName?((0,l.uX)(),(0,l.CE)("li",p,[(0,l.bF)(L,{to:"/Login",style:{"text-decoration":"none"}},{default:(0,l.k6)((()=>[b])),_:1})])):((0,l.uX)(),(0,l.CE)("li",v,[(0,l.Lk)("a",{href:"#",onClick:a[0]||(a[0]=(...t)=>n.memlogout&&n.memlogout(...t)),style:{"text-decoration":"none"}},f)])),(0,l.Lk)("li",y,[(0,l.bF)(L,{to:"/pagemember",style:{"text-decoration":"none"}},{default:(0,l.k6)((()=>[(0,l.Lk)("div",w,(0,r.v_)(o.memName),1)])),_:1})]),(0,l.Lk)("li",C,[(0,l.bF)(L,{to:"/cartlist",style:{"text-decoration":"none"}},{default:(0,l.k6)((()=>[_])),_:1})])]),(0,l.Lk)("div",E,[(0,l.bF)(x)])])])])}e(4114);var I=e(4373);const S={key:0};function A(t,a,e,s,o,n){return null!=o.cartId?((0,l.uX)(),(0,l.CE)("div",S,[(0,l.Lk)("button",{class:"btn btn-success text-white",onClick:a[0]||(a[0]=a=>t.$router.push(`/cartshow/${o.cartId}`))},(0,r.v_)(o.cartId)+" ["+(0,r.v_)(o.qty)+"] - "+(0,r.v_)(o.money)+"฿ ",1)])):(0,l.Q3)("",!0)}var F=e(595);const M=new F.A;I.A.defaults.withCredentials=!0;var X={name:"CartInfo",data(){return{cartId:null,qty:0,money:0}},async mounted(){await this.sumCart(),M.on("cartdtlOK",(()=>{this.sumCart()})),M.on("memlogout",(()=>{this.clearCart()}))},methods:{async sumCart(){console.log("sumCart"),await I.A.get("http://localhost:3000/carts/sumcart").then((t=>{console.log("SumCart"+t.data),this.cartId=t.data.id,this.qty=t.data.qty,this.money=t.data.money,console.log(this.money)})).catch((t=>{console.error(t)}))},clearCart(){console.log("Clear Cart"),this.cartId=null,this.qty=0,this.money=0}}},D=e(1241);const P=(0,D.A)(X,[["render",A]]);var $=P;I.A.defaults.withCredentials=!0;var N={name:"MainMenu",components:{CartInfo:$},data(){return{memName:null,backendmessage:null}},mounted(){this.memName=sessionStorage.getItem("memName"),M.on("loginok",(()=>{this.memName=sessionStorage.getItem("memName")}))},beforeUnmount(){M.off("loginok")},methods:{async memlogout(){M.emit("memlogout");const t=window.confirm("ต้องการออกจากระบบ?");if(t)try{const t=await I.A.get("http://localhost:3000/members/logout");this.backendMessage=t.data.messagelogout,"success"==this.backendMessage&&(sessionStorage.clear(),this.memName=null,this.$router.push("/"))}catch(a){console.log(a)}}}};const j=(0,D.A)(N,[["render",x]]);var q=j,O={name:"App",components:{MainMenu:q}};const K=(0,D.A)(O,[["render",n]]);var T=K,U=e(1387);const W={class:"mt-5 mx-3"};function J(t,a,e,s,o,n){const r=(0,l.g2)("PageProduct");return(0,l.uX)(),(0,l.CE)("div",W,[(0,l.bF)(r)])}const Q={class:"row"},V=(0,l.Lk)("div",{class:"col-lg-9 h1"},"My Product",-1),H={class:"col-lg-2 text-end"},G={class:"col"},R={class:"row"},Y={class:"card"},z={class:"border"},B=["src"],Z={class:"card-body"},tt={class:"card-title"},at={class:"card-text"},et=(0,l.Lk)("div",{class:"btn btn-primary"},"ดูรายละเอียด",-1);function st(t,a,e,o,n,c){const i=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",Q,[V,(0,l.Lk)("div",H,[(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=t=>n.stext=t),class:"form-control"},null,512),[[s.Jo,n.stext]])]),(0,l.Lk)("div",G,[(0,l.Lk)("button",{class:"btn btn-primary",onClick:a[1]||(a[1]=t=>c.searchProduct())},"Search")])]),(0,l.Lk)("div",R,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.products,((t,a)=>((0,l.uX)(),(0,l.CE)("div",{key:a,class:"col-lg-4 col-ml-6 col-sm-12"},[(0,l.Lk)("div",Y,[(0,l.Lk)("span",z,[(0,l.Lk)("img",{src:`http://localhost:3000/img_pd/${t.pd_id}.jpg`,class:"card-img-top p-2",alt:""},null,8,B)]),(0,l.Lk)("div",Z,[(0,l.Lk)("h5",tt,(0,r.v_)(t.pd_name),1),(0,l.Lk)("p",at,(0,r.v_)(t.thebrand.brand_name)+" - "+(0,r.v_)(t.pd_price),1),(0,l.bF)(i,{to:{name:"ProductShow",params:{pd_id:t.pd_id}},style:{"text-decoration":"none"}},{default:(0,l.k6)((()=>[et])),_:2},1032,["to"])])])])))),128))])],64)}I.A.defaults.withCredentials=!0;var lt={name:"PageProduct",data(){return{products:[],stext:""}},mounted(){I.A.get("http://localhost:3000/products/ten").then((t=>{this.products=t.data})).catch((t=>{console.error(t)}))},methods:{searchProduct(){I.A.get(`http://localhost:3000/products/search/${this.stext}`).then((t=>{console.log(this.stext),this.products=t.data})).catch((t=>{console.error(t)}))}}};const ot=(0,D.A)(lt,[["render",st]]);var nt=ot,rt={name:"TheHome",components:{PageProduct:nt}};const ct=(0,D.A)(rt,[["render",J]]);var it=ct,dt=e.p+"img/LogoSRC.9a6655e1.png";const mt={class:"row mt-5"},ut=(0,l.Lk)("div",{class:"col-sm-12 col-md-6 col-lg-6 mb-5"},[(0,l.Lk)("img",{src:dt,alt:"",wIdth:"80%"})],-1),ht={class:"col-sm-12 col-md-6 col-lg-6 mb3"},kt={class:"col-sm-12 col-md-10 col-lg-8"},gt={class:"form-floating mb-3"},pt=(0,l.Lk)("label",{for:"loginname"},"Loginname",-1),bt={class:"col-sm-12 col-md-10 col-lg-8"},vt={class:"form-floating mb-3"},Lt=(0,l.Lk)("label",{for:"password"},"Password",-1),ft={class:"row"},yt={class:"col-sm-12 col-md-6 mb-3"},wt=(0,l.Lk)("a",{href:"#",class:"btn btn-outline-danger"},[(0,l.Lk)("i",{class:"bi bi-heart-fill"}),(0,l.eW)(" ลงทะเบียนใหม่")],-1),Ct=(0,l.Lk)("div",{class:"col-sm-12 col-md-6"},[(0,l.Lk)("button",{class:"btn btn-primary",type:"submit",style:{wIdth:"6rem"}},[(0,l.Lk)("i",{class:"bi bi-check-lg"}),(0,l.eW)(" ตกลง")])],-1),_t={key:0,class:"alert alert-success"},Et={key:1,class:"alert alert-danger"};function xt(t,a,e,o,n,c){const i=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",mt,[ut,(0,l.Lk)("div",ht,[(0,l.Lk)("form",{onSubmit:a[2]||(a[2]=(0,s.D$)((t=>c.handleSubmit()),["prevent"]))},[(0,l.Lk)("div",kt,[(0,l.Lk)("div",gt,[(0,l.bo)((0,l.Lk)("input",{class:"form-control",type:"text",Id:"loginname","onUpdate:modelValue":a[0]||(a[0]=t=>n.loginname=t),autocomplete:"off",required:"",autofocus:"",placeholder:"loginname"},null,512),[[s.Jo,n.loginname]]),pt])]),(0,l.Lk)("div",bt,[(0,l.Lk)("div",vt,[(0,l.bo)((0,l.Lk)("input",{class:"form-control",type:"password",Id:"password","onUpdate:modelValue":a[1]||(a[1]=t=>n.password=t),required:"",placeholder:"Password"},null,512),[[s.Jo,n.password]]),Lt])]),(0,l.Lk)("div",ft,[(0,l.Lk)("div",yt,[(0,l.bF)(i,{to:"/register",style:{"text-decoration":"none"}},{default:(0,l.k6)((()=>[wt])),_:1})]),Ct])],32)])]),"success"==n.backendMessage?((0,l.uX)(),(0,l.CE)("p",_t," เข้าระบบสำเร็จ-"+(0,r.v_)(n.backendMessage),1)):"fail"==n.backendMessage?((0,l.uX)(),(0,l.CE)("p",Et," เข้าระบบผิดพลาด-"+(0,r.v_)(n.backendMessage),1)):(0,l.Q3)("",!0)],64)}var It={name:"TheLogin",data(){return{loginname:null,password:null,backendMessage:null,memEmail:null,memName:null,dutyId:null}},mounted(){sessionStorage.getItem(!0)&&this.$router.push("/pagemember")},methods:{async handleSubmit(){let t={loginname:this.loginname,password:this.password};try{const a=await I.A.post("http://localhost:3000/members/login",t);this.backendMessage=a.data.messagelogin,"success"==this.backendMessage&&(await this.chkSession(),M.emit("loginok"),this.$router.push("/pagemember"))}catch(a){console.log(a)}},async chkSession(){await I.A.get("http://localhost:3000/members/getss").then((t=>{console.log(t.data),this.memEmail=t.data.email,this.memName=t.data.name,this.dutyId=t.data.duty,sessionStorage.setItem("memName",t.data.name)})).catch((t=>{console.error(t)}))}}};const St=(0,D.A)(It,[["render",xt]]);var At=St;const Ft=t=>((0,l.Qi)("data-v-1b868476"),t=t(),(0,l.jt)(),t),Mt={class:"row d-flex justify-content-center"},Xt={class:"col-lg-6 col-md-8 col-sm-12"},Dt={class:"card row mt-5",style:{"background-color":"#EEFFEE"}},Pt={class:"card-body"},$t=Ft((()=>(0,l.Lk)("h1",{class:"card-title text-secondary"},"ลงทะเบียนสมาชิกใหม่",-1))),Nt={class:"col-lg-12 mb-3"},jt={class:"form-floating mb-3"},qt=Ft((()=>(0,l.Lk)("label",{for:"memEmail"},"Email",-1))),Ot={class:"col-lg-12 mb-3"},Kt={class:"form-floating mb-3"},Tt=Ft((()=>(0,l.Lk)("label",{for:"memName"},"ชื่อ",-1))),Ut={class:"col-lg-12 mb-3"},Wt={class:"form-floating mb-3"},Jt=Ft((()=>(0,l.Lk)("label",{for:"password"},"Password",-1))),Qt=Ft((()=>(0,l.Lk)("div",{class:"col-sm-12"},[(0,l.Lk)("button",{class:"btn btn-primary float-end",type:"submit"},[(0,l.Lk)("i",{class:"bi bi-check-lg"}),(0,l.eW)(" ตกลง")])],-1))),Vt={key:0,class:"alert alert-success mt-3"},Ht={key:1,class:"alert alert-danger mt-3"};function Gt(t,a,e,o,n,c){return(0,l.uX)(),(0,l.CE)("div",Mt,[(0,l.Lk)("div",Xt,[(0,l.Lk)("form",{onSubmit:a[3]||(a[3]=(0,s.D$)((t=>c.handleSubmit()),["prevent"]))},[(0,l.Lk)("div",Dt,[(0,l.Lk)("div",Pt,[$t,(0,l.Lk)("div",Nt,[(0,l.Lk)("div",jt,[(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control",id:"memEmail",autocomplete:"off",required:"",placeholder:"Email","onUpdate:modelValue":a[0]||(a[0]=t=>n.memEmail=t)},null,512),[[s.Jo,n.memEmail,void 0,{trim:!0}]]),qt])]),(0,l.Lk)("div",Ot,[(0,l.Lk)("div",Kt,[(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control",id:"memName",autocomplete:"off",required:"",placeholder:"ชื่อ","onUpdate:modelValue":a[1]||(a[1]=t=>n.memName=t)},null,512),[[s.Jo,n.memName,void 0,{trim:!0}]]),Tt])]),(0,l.Lk)("div",Ut,[(0,l.Lk)("div",Wt,[(0,l.bo)((0,l.Lk)("input",{type:"password",class:"form-control",id:"password",autocomplete:"off",required:"",placeholder:"Password","onUpdate:modelValue":a[2]||(a[2]=t=>n.password=t)},null,512),[[s.Jo,n.password,void 0,{trim:!0}]]),Jt])]),Qt])])],32),"success"==n.backendMessage?((0,l.uX)(),(0,l.CE)("p",Vt," ลงทะเบียนสำเร็จ-"+(0,r.v_)(n.backendMessage),1)):"fail"==n.backendMessage?((0,l.uX)(),(0,l.CE)("p",Ht," ลงทะเบียนผิดพลาด-"+(0,r.v_)(n.backendMessage),1)):(0,l.Q3)("",!0)])])}var Rt={name:"TheRegister",data(){return{memEmail:null,memName:null,password:null,backendMessage:null}},methods:{async handleSubmit(){let t={memEmail:this.memEmail,memName:this.memName,password:this.password};try{const a=await I.A.post("http://localhost:3000/members",t);this.backendMessage=a.data.messageregister}catch(a){console.log(a)}}}};const Yt=(0,D.A)(Rt,[["render",Gt],["__scopeId","data-v-1b868476"]]);var zt=Yt;const Bt={class:"row"},Zt={class:"col-md-6 col-sm-12"},ta={class:"mt-5 text-end"},aa={class:"text-end"},ea={class:"col-md-6 col-sm-12"},sa={key:0,class:"card mt-5",style:{width:"18rem"}},la=["src","alt"],oa={key:1,class:"card mt-5",style:{width:"18rem"}},na=["alt"],ra={class:"row g-3 mt-3"},ca=(0,l.Lk)("div",{class:"col-md-6 col-sm-12"},null,-1),ia={class:"col-auto"},da=(0,l.Lk)("div",{class:"col-auto"},[(0,l.Lk)("button",{class:"btn btn-primary",type:"submit"},"Upload")],-1),ma={class:"row g-3 mt-3"},ua=(0,l.Lk)("div",{class:"col-md-6 col-sm-12"},null,-1),ha={class:"col-auto"},ka={key:0,class:"alert alert-success"},ga=(0,l.Lk)("div",{class:"col-auto"},null,-1);function pa(t,a,e,o,n,c){return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",Bt,[(0,l.Lk)("div",Zt,[(0,l.Lk)("h3",ta,(0,r.v_)(n.memEmail),1),(0,l.Lk)("h5",aa,(0,r.v_)(n.memName),1)]),(0,l.Lk)("div",ea,[n.imageExists?((0,l.uX)(),(0,l.CE)("div",sa,[(0,l.Lk)("img",{src:`http://localhost:3000/img_mem/${n.memEmail}.jpg?timestamp=${n.imageTimestamp}`,alt:n.memEmail},null,8,la)])):((0,l.uX)(),(0,l.CE)("div",oa,[(0,l.Lk)("img",{src:"http://localhost:3000/img_mem/default.jpg",alt:n.memEmail},null,8,na)]))])]),(0,l.Lk)("form",{onSubmit:a[1]||(a[1]=(0,s.D$)(((...t)=>c.uploadFile&&c.uploadFile(...t)),["prevent"]))},[(0,l.Lk)("div",ra,[ca,(0,l.Lk)("div",ia,[(0,l.Lk)("input",{class:"form-control",type:"file",id:"formFile",onChange:a[0]||(a[0]=(...t)=>c.onFileChange&&c.onFileChange(...t)),required:""},null,32)]),da]),(0,l.Lk)("div",ma,[ua,(0,l.Lk)("div",ha,["fail"!=n.fileMessage&&null!=n.fileMessage?((0,l.uX)(),(0,l.CE)("div",ka,(0,r.v_)(n.fileMessage),1)):(0,l.Q3)("",!0)]),ga])],32)],64)}I.A.defaults.withCredentials=!0;var ba={name:"PageMember",data(){return{memEmail:null,memName:null,dutyId:null,imageExists:!1,fileMessage:null,file:null,imageTimestamp:Date.now()}},async mounted(){await this.chkSession(),this.checkImage()},methods:{onFileChange(t){this.file=t.target.files[0]},async uploadFile(){if(!this.file)return void(this.fileMessage="เลือก File ก่อน");const t=new FormData;t.append("file",this.file);try{const a=await I.A.post("http://localhost:3000/members/uploadImg",t,{headers:{"Content-Type":"multipart/form-data"}});this.fileMessage=a.data.message,this.checkImage(),this.imageTimestamp=Date.now()}catch(a){this.fileMessage="fail"}},async chkSession(){await I.A.get("http://localhost:3000/members/getss").then((t=>{console.log(t.data),this.memEmail=t.data.email,this.memName=t.data.name,this.dutyId=t.data.duty})).catch((t=>{console.error(t)}))},checkImage(){const t=new Image;t.src=`http://localhost:3000/img_mem/${this.memEmail}.jpg`,t.onload=()=>{this.imageExists=!0},t.onerror=()=>{this.imageExists=!1}}}};const va=(0,D.A)(ba,[["render",pa]]);var La=va;const fa={class:"row"},ya={class:"col-md-6 col-sm-12"},wa={class:"card mx-auto",style:{width:"18rem"}},Ca=["src"],_a={class:"col-md-6 col-sm-12"},Ea={class:"table"},xa={class:"table-secondary"},Ia=(0,l.Lk)("td",null,[(0,l.Lk)("h5",null,"ราคา")],-1),Sa=(0,l.Lk)("td",null,[(0,l.Lk)("h5",null,"ยี่ห้อ")],-1),Aa=(0,l.Lk)("td",null,[(0,l.Lk)("h5",null,"รายละเอียด")],-1),Fa=(0,l.Lk)("i",{class:"bi bi-cart lead"},null,-1),Ma=(0,l.Lk)("button",{class:"btn btn-warning float-end"},[(0,l.Lk)("i",{class:"bi bi-pencil-fill lead"}),(0,l.eW)(" แก้ไข   ")],-1);function Xa(t,a,e,s,o,n){return(0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.products,((t,e)=>((0,l.uX)(),(0,l.CE)("div",{key:e,class:"mt-5"},[(0,l.Lk)("div",fa,[(0,l.Lk)("div",ya,[(0,l.Lk)("div",wa,[(0,l.Lk)("img",{src:`http://localhost:3000/img_pd/${t.pd_id}.jpg`,alt:""},null,8,Ca)])]),(0,l.Lk)("div",_a,[(0,l.Lk)("table",Ea,[(0,l.Lk)("tr",xa,[(0,l.Lk)("td",null,[(0,l.Lk)("h4",null,(0,r.v_)(t.pd_id),1)]),(0,l.Lk)("td",null,[(0,l.Lk)("h4",null,(0,r.v_)(t.pd_name),1)])]),(0,l.Lk)("tr",null,[Ia,(0,l.Lk)("td",null,[(0,l.Lk)("h5",null,(0,r.v_)(t.pd_price),1)])]),(0,l.Lk)("tr",null,[Sa,(0,l.Lk)("td",null,[(0,l.Lk)("h5",null,(0,r.v_)(t.thebrand.brand_name),1)])]),(0,l.Lk)("tr",null,[Aa,(0,l.Lk)("td",null,[(0,l.Lk)("h5",null,(0,r.v_)(t.pd_remark),1)])])]),(0,l.Lk)("button",{class:"btn btn-primary",onClick:a[0]||(a[0]=(...t)=>n.chkLogin&&n.chkLogin(...t))},[Fa,(0,l.eW)(" ใส่ตะกร้า  ")]),Ma])])])))),128)}I.A.defaults.withCredentials=!0;var Da={name:"ProductShow",data(){return{products:[],id:null,memEmail:null,cartId:null,backendMessage:""}},mounted(){this.id=this.$route.params.pd_id,this.fetchProduct()},methods:{async fetchProduct(){try{const t=await I.A.get(`http://localhost:3000/products/${this.id}`);this.products=t.data}catch(t){console.error(t),alert("Failed to load product data.")}},async chkLogin(){await this.chkSession(),this.memEmail?(await this.chkCart(),this.cartId||await this.addCart(),this.addCartDtl()):alert("ต้อง Login เข้าระบบก่อน")},async chkSession(){try{const t=await I.A.get("http://localhost:3000/members/getss");this.memEmail=t.data.email}catch(t){console.error(t),alert("Session check failed.")}},async addCart(){try{const t={cusId:this.memEmail},a=await I.A.post("http://localhost:3000/carts/addcart",t);this.backendMessage=a.data.messageAddCart,this.cartId=a.data.messageAddCart}catch(t){console.error(t),alert("Failed to create cart.")}},async chkCart(){try{const t=await I.A.get("http://localhost:3000/carts/chkcart");this.cartId=t.data.id}catch(t){console.error(t),alert("Failed to check cart.")}},async addCartDtl(){const t={cartId:this.cartId,pdId:this.id,pdPrice:this.products[0].pd_price};try{const a=await I.A.post("http://localhost:3000/carts/addcartdtl",t);M.emit("cartdtlOK"),this.backendMessage=a.data.messageAddCartDtl}catch(a){console.error(a),alert("Failed to add product to cart.")}}}};const Pa=(0,D.A)(Da,[["render",Xa]]);var $a=Pa;const Na=t=>((0,l.Qi)("data-v-4d3633fe"),t=t(),(0,l.jt)(),t),ja={key:0},qa={class:"card bg-light"},Oa={class:"card-body"},Ka={class:"card-title text-primary opacity-75"},Ta={class:"card-subtitle mt-2 text-muted"},Ua={class:"text-danger text-end"},Wa=Na((()=>(0,l.Lk)("hr",null,null,-1))),Ja=Na((()=>(0,l.Lk)("a",{class:"btn btn-danger",onclick:"return confirm('ยืนยันลบตะกร้า')"},[(0,l.Lk)("i",{class:"bi-cart-x-fill"}),(0,l.eW)(" ลบตะกร้าสินค้า ")],-1))),Qa=Na((()=>(0,l.Lk)("a",{class:"btn btn-primary float-end",onclick:"return confirm('ยืนยันสั่งสินค้า')"},[(0,l.Lk)("i",{class:"bi-currency-dollar"}),(0,l.eW)(" ยืนยันสั่งสินค้า ")],-1))),Va={class:"table mt-3"},Ha=Na((()=>(0,l.Lk)("tr",{class:"bg-secondary bg-opacity-10"},[(0,l.Lk)("td"),(0,l.Lk)("td",null,"สินค้า"),(0,l.Lk)("td"),(0,l.Lk)("td",{class:"text-end"},"ราคาต่อหน่วย"),(0,l.Lk)("td",{class:"text-center"},"จำนวน"),(0,l.Lk)("td",{class:"text-end"},"เป็นเงิน"),(0,l.Lk)("td")],-1))),Ga={class:"text-end"},Ra={class:"text-center"},Ya={class:"text-end"},za=Na((()=>(0,l.Lk)("td",{class:"text-center"},[(0,l.Lk)("i",{class:"bi-x-lg text-danger"})],-1))),Ba={key:1},Za=Na((()=>(0,l.Lk)("div",{class:"alert alert-danger mt-5"},"คุณไม่มีสิทธิ์ดูรายการนี้",-1))),te=[Za];function ae(t,a,e,s,o,n){return o.memEmail==o.cusId?((0,l.uX)(),(0,l.CE)("div",ja,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.cart,((t,a)=>((0,l.uX)(),(0,l.CE)("div",{key:a,class:"mt-5"},[(0,l.Lk)("div",qa,[(0,l.Lk)("div",Oa,[(0,l.Lk)("h4",Ka,"คำสั่งซื้อเลขที่ "+(0,r.v_)(t.cartId),1),(0,l.Lk)("h5",Ta," สั่งซื้อวันที่ "+(0,r.v_)(n.formattedDate(t.cartDate)),1),(0,l.Lk)("div",Ua," จำนวนสินค้า "+(0,r.v_)(t.sqty)+"ชิ้น, ยอดเงิน "+(0,r.v_)(t.sprice.toLocaleString())+" บาท ",1),Wa,Ja,Qa])])])))),128)),(0,l.Lk)("table",Va,[Ha,((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.cartDtl,((t,a)=>((0,l.uX)(),(0,l.CE)("tr",{key:a},[(0,l.Lk)("td",null,(0,r.v_)(t.row_number),1),(0,l.Lk)("td",null,(0,r.v_)(t.pdId),1),(0,l.Lk)("td",null,(0,r.v_)(t.pdName),1),(0,l.Lk)("td",Ga,(0,r.v_)(t.price),1),(0,l.Lk)("td",Ra,(0,r.v_)(t.qty),1),(0,l.Lk)("td",Ya,(0,r.v_)((t.price*t.qty).toLocaleString()),1),za])))),128))])])):((0,l.uX)(),(0,l.CE)("div",Ba,te))}I.A.defaults.withCredentials=!0;var ee={name:"CartShow",data(){return{cart:[],cartDtl:[],cartId:null,memEmail:null,cusId:null}},async mounted(){await this.chkSession(),this.cartId=this.$route.params.cartId,await this.getCart(),await this.getCartDtl()},methods:{formattedDate(t){const a=new Date(t),e=a.getFullYear(),s=String(a.getMonth()+1).padStart(2,"0"),l=String(a.getDate()).padStart(2,"0");return`${e}-${s}-${l}`},async getCart(){console.log("Get Cart"),await I.A.get(`http://localhost:3000/carts/getcart/${this.cartId}`).then((t=>{console.log("Cart \n"+t.data),this.cart=t.data,this.cusId=t.data[0].cusId})).catch((t=>{console.error(t)}))},async getCartDtl(){console.log("Get CartCartDtl"),await I.A.get(`http://localhost:3000/carts/getcartdtl/${this.cartId}`).then((t=>{console.log("CartDtl \n"+t.data),this.cartDtl=t.data})).catch((t=>{console.error(t)}))},async chkSession(){await I.A.get("http://localhost:3000/members/getss").then((t=>{console.log(t.data),this.memEmail=t.data.email})).catch((t=>{console.error(t)}))}}};const se=(0,D.A)(ee,[["render",ae],["__scopeId","data-v-4d3633fe"]]);var le=se;const oe={class:"table"},ne=(0,l.Lk)("tr",{class:"bg-secondary bg-opacity-10",style:{height:"30px"}},[(0,l.Lk)("td"),(0,l.Lk)("td",null,"เลขที่"),(0,l.Lk)("td",null,"วันที่"),(0,l.Lk)("td",{class:"text-center"},"จำนวน"),(0,l.Lk)("td",{class:"text-end"},"ยอดเงิน"),(0,l.Lk)("td")],-1),re={class:"text-primary"},ce={class:"text-center"},ie={class:"text-end"},de=(0,l.Lk)("td",{class:"text-center"},[(0,l.Lk)("i",{class:"bi-x-lg text-danger"})],-1);function me(t,a,e,s,o,n){const c=(0,l.g2)("H1"),i=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(c,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(o.memEmail),1)])),_:1}),(0,l.Lk)("table",oe,[ne,((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.cart,((t,a)=>((0,l.uX)(),(0,l.CE)("tr",{key:a,style:{height:"30px"}},[(0,l.Lk)("td",null,(0,r.v_)(t.row_number),1),(0,l.Lk)("td",null,[(0,l.Lk)("span",re,[(0,l.bF)(i,{to:`/cartshow/${t.cartId}`,style:{"text-decoration":"none"}},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(t.cartId),1)])),_:2},1032,["to"])])]),(0,l.Lk)("td",null,(0,r.v_)(n.formattedDate(t.cartDate)),1),(0,l.Lk)("td",ce,(0,r.v_)(t.sqty),1),(0,l.Lk)("td",ie,(0,r.v_)(t.sprice.toLocaleString()),1),de])))),128))])],64)}I.A.defaults.withCredentials=!0;var ue={name:"CartList",data(){return{memEmail:null,cart:[]}},async mounted(){await this.chkSession(),await this.getCartList()},methods:{formattedDate(t){const a=new Date(t),e=a.getFullYear(),s=String(a.getMonth()+1).padStart(2,"0"),l=String(a.getDate()).padStart(2,"0");return`${e}-${s}-${l}`},async getCartList(){let t={id:this.memEmail};console.log("Get CartLIST"),await I.A.post("http://localhost:3000/carts/getcartbycus",t).then((t=>{console.log("Cart \n"+t.data),this.cart=t.data,this.cusId=t.data[0].cusId})).catch((t=>{console.error(t)}))},async chkSession(){await I.A.get("http://localhost:3000/members/getss").then((t=>{console.log(t.data),this.memEmail=t.data.email})).catch((t=>{console.error(t)}))}}};const he=(0,D.A)(ue,[["render",me]]);var ke=he;const ge=[{path:"/pagemember",name:"PageMember",component:La},{path:"/",name:"Home",component:it},{path:"/login",name:"Login",component:At},{path:"/register",name:"Register",component:zt},{path:"/ProductShow/:pd_id",name:"ProductShow",component:$a},{path:"/CartShow/:cartId",name:"CartShow",component:le},{path:"/CartList/",name:"CartList",component:ke}],pe=(0,U.aE)({history:(0,U.LA)("/"),routes:ge});var be=pe;(0,s.Ef)(T).use(be).mount("#app")}},a={};function e(s){var l=a[s];if(void 0!==l)return l.exports;var o=a[s]={exports:{}};return t[s].call(o.exports,o,o.exports,e),o.exports}e.m=t,function(){var t=[];e.O=function(a,s,l,o){if(!s){var n=1/0;for(d=0;d<t.length;d++){s=t[d][0],l=t[d][1],o=t[d][2];for(var r=!0,c=0;c<s.length;c++)(!1&o||n>=o)&&Object.keys(e.O).every((function(t){return e.O[t](s[c])}))?s.splice(c--,1):(r=!1,o<n&&(n=o));if(r){t.splice(d--,1);var i=l();void 0!==i&&(a=i)}}return a}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[s,l,o]}}(),function(){e.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(a,{a:a}),a}}(),function(){e.d=function(t,a){for(var s in a)e.o(a,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:a[s]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)}}(),function(){e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){e.p="/"}(),function(){var t={524:0};e.O.j=function(a){return 0===t[a]};var a=function(a,s){var l,o,n=s[0],r=s[1],c=s[2],i=0;if(n.some((function(a){return 0!==t[a]}))){for(l in r)e.o(r,l)&&(e.m[l]=r[l]);if(c)var d=c(e)}for(a&&a(s);i<n.length;i++)o=n[i],e.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return e.O(d)},s=self["webpackChunkkushop"]=self["webpackChunkkushop"]||[];s.forEach(a.bind(null,0)),s.push=a.bind(null,s.push.bind(s))}();var s=e.O(void 0,[504],(function(){return e(7254)}));s=e.O(s)})();
//# sourceMappingURL=app.9a77667c.js.map