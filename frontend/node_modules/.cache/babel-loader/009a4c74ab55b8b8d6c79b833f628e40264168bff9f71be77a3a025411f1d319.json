{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-7389f3ed\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  key: 0\n};\nconst _hoisted_2 = {\n  class: \"card bg-light\"\n};\nconst _hoisted_3 = {\n  class: \"card-body\"\n};\nconst _hoisted_4 = {\n  class: \"card-title text-primary opacity-75\"\n};\nconst _hoisted_5 = {\n  class: \"card-subtitle mt-2 text-muted\"\n};\nconst _hoisted_6 = {\n  class: \"text-danger text-end\"\n};\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1 /* HOISTED */));\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"a\", {\n  class: \"btn btn-danger\",\n  onclick: \"return confirm('ยืนยันลบตะกร้า')\"\n}, [/*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"bi-cart-x-fill\"\n}), /*#__PURE__*/_createTextVNode(\" ลบตะกร้าสินค้า \")], -1 /* HOISTED */));\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"a\", {\n  class: \"btn btn-primary float-end\",\n  onclick: \"return confirm('ยืนยันสั่งสินค้า')\"\n}, [/*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"bi-currency-dollar\"\n}), /*#__PURE__*/_createTextVNode(\" ยืนยันสั่งสินค้า \")], -1 /* HOISTED */));\nconst _hoisted_10 = {\n  class: \"table mt-3\"\n};\nconst _hoisted_11 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"tr\", {\n  class: \"bg-secondary bg-opacity-10\"\n}, [/*#__PURE__*/_createElementVNode(\"td\"), /*#__PURE__*/_createElementVNode(\"td\", null, \"สินค้า\"), /*#__PURE__*/_createElementVNode(\"td\"), /*#__PURE__*/_createElementVNode(\"td\", {\n  class: \"text-end\"\n}, \"ราคาต่อหน่วย\"), /*#__PURE__*/_createElementVNode(\"td\", {\n  class: \"text-center\"\n}, \"จำนวน\"), /*#__PURE__*/_createElementVNode(\"td\", {\n  class: \"text-end\"\n}, \"เป็นเงิน\"), /*#__PURE__*/_createElementVNode(\"td\")], -1 /* HOISTED */));\nconst _hoisted_12 = {\n  class: \"text-end\"\n};\nconst _hoisted_13 = {\n  class: \"text-center\"\n};\nconst _hoisted_14 = {\n  class: \"text-end\"\n};\nconst _hoisted_15 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"td\", {\n  class: \"text-center\"\n}, [/*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"bi-x-lg text-danger\"\n})], -1 /* HOISTED */));\nconst _hoisted_16 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", null, [/*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"alert alert-danger mt-5\"\n}, \"คุณไม่มีสิทธิ์ดูรายการนี้\")], -1 /* HOISTED */));\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createCommentVNode(\" Master \"), _createCommentVNode(\" ถ้าค่าที่อยู่ใน Session กับ CusId ไม่ตรงกันแสดงว่าไม่ใช้ผู้ซื้อไม่มีสิทธิอ่าน \"), $data.memEmail == $data.cusId ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.cart, (ct, cartId) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: cartId,\n      class: \"mt-5\"\n    }, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"h4\", _hoisted_4, \"คำสั่งซื้อเลขที่ \" + _toDisplayString(ct.cartId), 1 /* TEXT */), _createElementVNode(\"h5\", _hoisted_5, \" สั่งซื้อวันที่ \" + _toDisplayString($options.formattedDate(ct.cartDate)), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_6, \" จำนวนสินค้า \" + _toDisplayString(ct.sqty) + \"ชิ้น, ยอดเงิน \" + _toDisplayString(ct.sprice.toLocaleString()) + \" บาท \", 1 /* TEXT */), _hoisted_7, _hoisted_8, _hoisted_9])]), _createCommentVNode(\"card\")]);\n  }), 128 /* KEYED_FRAGMENT */)), _createCommentVNode(\"-v for  \"), _createCommentVNode(\" Detail \"), _createElementVNode(\"table\", _hoisted_10, [_hoisted_11, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.cartDtl, (ctd, pdId) => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: pdId\n    }, [_createElementVNode(\"td\", null, _toDisplayString(ctd.row_number), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(ctd.pdId), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(ctd.pdName), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_12, _toDisplayString(ctd.price), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_13, _toDisplayString(ctd.qty), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_14, _toDisplayString((ctd.price * ctd.qty).toLocaleString()), 1 /* TEXT */), _hoisted_15]);\n  }), 128 /* KEYED_FRAGMENT */))])])) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 1\n  }, [_createCommentVNode(\"v-if\"), _hoisted_16], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */);\n}","map":{"version":3,"names":["key","class","_createElementVNode","onclick","_createTextVNode","_createElementBlock","_Fragment","_createCommentVNode","$data","memEmail","cusId","_hoisted_1","_renderList","cart","ct","cartId","_hoisted_2","_hoisted_3","_hoisted_4","_toDisplayString","_hoisted_5","$options","formattedDate","cartDate","_hoisted_6","sqty","sprice","toLocaleString","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","cartDtl","ctd","pdId","row_number","pdName","_hoisted_12","price","_hoisted_13","qty","_hoisted_14","_hoisted_15","_hoisted_16"],"sources":["D:\\Users\\Student\\Desktop\\123\\project_webtech\\frontend\\src\\components\\CartShow.vue"],"sourcesContent":["<template>\r\n    <!-- Master --><!-- ถ้าค่าที่อยู่ใน Session กับ CusId ไม่ตรงกันแสดงว่าไม่ใช้ผู้ซื้อไม่มีสิทธิอ่าน -->\r\n    <div v-if=\"memEmail==cusId\">\r\n        <div v-for=\"(ct, cartId) in cart\" :key=\"cartId\" class=\"mt-5\">\r\n            <div class=\"card bg-light\">\r\n                <div class=\"card-body\">\r\n                    <h4 class=\"card-title text-primary opacity-75\">คำสั่งซื้อเลขที่ {{ ct.cartId }}</h4>\r\n                    <h5 class=\"card-subtitle mt-2 text-muted\">\r\n                        สั่งซื้อวันที่ {{ formattedDate(ct.cartDate) }}\r\n                    </h5>\r\n                    <div class=\"text-danger text-end\">\r\n                        จำนวนสินค้า {{ ct.sqty }}ชิ้น, ยอดเงิน {{ ct.sprice.toLocaleString() }} บาท\r\n                    </div>\r\n                    <hr />\r\n                    <a class=\"btn btn-danger\" onclick=\"return confirm('ยืนยันลบตะกร้า')\">\r\n                        <i class=\"bi-cart-x-fill\"></i> ลบตะกร้าสินค้า\r\n                    </a>\r\n                    <a class=\"btn btn-primary float-end\" onclick=\"return confirm('ยืนยันสั่งสินค้า')\">\r\n                        <i class=\"bi-currency-dollar\"></i> ยืนยันสั่งสินค้า\r\n                    </a>\r\n                </div>\r\n            </div> <!--card-->\r\n        </div> <!---v for  -->\r\n   \r\n        <!-- Detail -->\r\n        <table class=\"table  mt-3 \">\r\n            <tr class=\"bg-secondary bg-opacity-10\">\r\n                <td></td>\r\n                <td>สินค้า</td>\r\n                <td></td>\r\n                <td class=\"text-end\">ราคาต่อหน่วย</td>\r\n                <td class=\"text-center\">จำนวน</td>\r\n                <td class=\"text-end\">เป็นเงิน</td>\r\n                <td></td>\r\n            </tr>\r\n            <tr v-for=\"(ctd, pdId) in cartDtl\" :key=\"pdId\">\r\n                <td>{{ ctd.row_number }}</td>\r\n                <td>{{ ctd.pdId }}</td>\r\n                <td>{{ ctd.pdName }}</td>\r\n                <td class=\"text-end\">{{ ctd.price }}</td>\r\n                <td class=\"text-center\">{{ ctd.qty }}</td>\r\n                <td class=\"text-end\">{{ (ctd.price * ctd.qty).toLocaleString() }}</td>\r\n                <td class=\"text-center\">\r\n                    <i class=\"bi-x-lg text-danger\"></i>\r\n                </td>\r\n            </tr>\r\n        </table>\r\n    </div><!--v-if-->\r\n    <div v-else>\r\n        <div class=\"alert alert-danger mt-5\">คุณไม่มีสิทธิ์ดูรายการนี้</div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport axios from 'axios';\r\naxios.defaults.withCredentials = true\r\nexport default {\r\n    name: \"CartShow\",\r\n    data() {\r\n        return {\r\n            cart: [],//รับข้อมูล Master\r\n            cartDtl: [], //รับข้อมูล Detail\r\n            cartId: null,\r\n            memEmail: null,\r\n            cusId:null\r\n        }\r\n    }, \r\n    async mounted() {\r\n        // ตรวจสอบว่าเป็นเจ้าของตะกร้าหรือไม่\r\n        await this.chkSession()\r\n        this.cartId = this.$route.params.cartId\r\n        // อ่านข้อมูล Master +อ่านข้อมูล Detail \r\n        await this.getCart()\r\n        await this.getCartDtl()\r\n    },\r\n    methods: {\r\n        // แปลงรูปแบบวันที่\r\n        formattedDate(dateStr) {\r\n            const date = new Date(dateStr);\r\n            const year = date.getFullYear();\r\n            const month = String(date.getMonth()+ 1).padStart(2, '0'); // เดือนเริ่มต้นที่ 0, จึงต้อง +1\r\n            const day = String(date.getDate()).padStart(2, '0');\r\n            return `${year}-${month}-${day}`;\r\n        },\r\n        // Master\r\n        async getCart() {\r\n            console.log('Get Cart')\r\n            await axios.get(`http://localhost:3000/carts/getcart/${this.cartId}`)\r\n                .then(res => {\r\n                    console.log(\"Cart \\n\" + res.data)\r\n                    this.cart = res.data\r\n                    this.cusId = res.data[0].cusId\r\n                })\r\n                .catch(err => {\r\n                    console.error(err);\r\n                });\r\n        },\r\n        // Detail\r\n        async getCartDtl() {\r\n            console.log('Get CartCartDtl')\r\n            await axios.get(`http://localhost:3000/carts/getcartdtl/${this.cartId}`)\r\n                .then(res => {\r\n                    console.log(\"CartDtl \\n\" + res.data)\r\n                    this.cartDtl = res.data\r\n                })\r\n                .catch(err => {\r\n                    console.error(err);\r\n                });\r\n        },\r\n        // ตรวจสอบ Session\r\n        async chkSession() {\r\n            await axios.get(`http://localhost:3000/members/getss`)\r\n            .then(res => {\r\n                console.log(res.data)\r\n                this.memEmail = res.data.email\r\n            })\r\n            .catch(err => {\r\n                console.error(err);\r\n            });\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n.card {\r\n    border-radius: 15px;\r\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\r\n    transition: transform 0.2s;\r\n}\r\n\r\n.card:hover {\r\n    transform: translateY(-5px);\r\n}\r\n\r\n.card-title {\r\n    font-size: 1.5rem;\r\n}\r\n\r\n.card-body {\r\n    padding: 20px;\r\n}\r\n\r\n.table {\r\n    margin-top: 20px;\r\n    border-collapse: collapse;\r\n}\r\n\r\n.table th, .table td {\r\n    padding: 12px;\r\n    border: 1px solid #ddd;\r\n}\r\n\r\n.table th {\r\n    background-color: #f8f9fa;\r\n}\r\n\r\n.text-danger {\r\n    color: #dc3545;\r\n}\r\n\r\n.btn {\r\n    border-radius: 20px;\r\n    padding: 10px 15px;\r\n    transition: background-color 0.3s, transform 0.2s;\r\n}\r\n\r\n.btn-danger {\r\n    background-color: #dc3545;\r\n    color: white;\r\n}\r\n\r\n.btn-danger:hover {\r\n    background-color: #c82333;\r\n    transform: scale(1.05);\r\n}\r\n\r\n.btn-primary {\r\n    background-color: #007bff;\r\n    color: white;\r\n}\r\n\r\n.btn-primary:hover {\r\n    background-color: #0069d9;\r\n    transform: scale(1.05);\r\n}\r\n\r\n.alert {\r\n    border-radius: 15px;\r\n    padding: 20px;\r\n    font-size: 1.1rem;\r\n}\r\n\r\n.text-muted {\r\n    font-size: 0.9rem;\r\n}\r\n\r\n.text-end {\r\n    text-align: right;\r\n}\r\n\r\n.text-center {\r\n    text-align: center;\r\n}\r\n\r\n.mt-5 {\r\n    margin-top: 3rem;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}