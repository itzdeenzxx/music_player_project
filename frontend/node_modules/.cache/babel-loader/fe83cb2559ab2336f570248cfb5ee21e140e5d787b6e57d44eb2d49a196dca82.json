{"ast":null,"code":"import axios from 'axios';\nexport default {\n  name: 'SearchResults',\n  data() {\n    return {\n      searchResults: [],\n      loading: true,\n      error: null,\n      searchQuery: ''\n    };\n  },\n  async created() {\n    this.searchQuery = this.$route.params.query;\n    await this.fetchSearchResults();\n  },\n  watch: {\n    // Watch for route changes to update results when search query changes\n    '$route.params.query': {\n      handler: async function (newQuery) {\n        this.searchQuery = newQuery;\n        await this.fetchSearchResults();\n      }\n    }\n  },\n  methods: {\n    async fetchSearchResults() {\n      this.loading = true;\n      this.error = null;\n      try {\n        const response = await axios.get(`http://localhost:3000/musics/search/${this.searchQuery}`);\n        this.searchResults = response.data;\n      } catch (error) {\n        console.error('Error fetching search results:', error);\n        this.error = 'เกิดข้อผิดพลาดในการค้นหา กรุณาลองใหม่อีกครั้ง';\n      } finally {\n        this.loading = false;\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","name","data","searchResults","loading","error","searchQuery","created","$route","params","query","fetchSearchResults","watch","handler","newQuery","methods","response","get","console"],"sources":["/Users/addeen/Desktop/project/frontend/src/components/PageMusic.vue"],"sourcesContent":["<template>\r\n    <div class=\"container mt-4\">\r\n      <h2 class=\"mb-4\">ผลการค้นหา: \"{{ searchQuery }}\"</h2>\r\n      \r\n      <div v-if=\"loading\" class=\"text-center\">\r\n        <div class=\"spinner-border\" role=\"status\">\r\n          <span class=\"visually-hidden\">Loading...</span>\r\n        </div>\r\n      </div>\r\n  \r\n      <div v-else-if=\"error\" class=\"alert alert-warning\" role=\"alert\">\r\n        {{ error }}\r\n      </div>\r\n  \r\n      <div v-else-if=\"searchResults.length === 0\" class=\"alert alert-info\" role=\"alert\">\r\n        ไม่สามารถพบเพลง\r\n      </div>\r\n  \r\n      <div v-else class=\"row row-cols-1 row-cols-md-3 g-4\">\r\n        <div v-for=\"music in searchResults\" :key=\"music.ms_id\" class=\"col\">\r\n          <div class=\"card h-100\">\r\n            <img :src=\"music.ms_image\" class=\"card-img-top\" :alt=\"music.ms_name\">\r\n            <div class=\"card-body\">\r\n              <h5 class=\"card-title\">{{ music.ms_name }}</h5>\r\n              <p class=\"card-text\">{{ music.ms_artist }}</p>\r\n              <p class=\"card-text\"><small class=\"text-muted\">{{ music.ms_album }}</small></p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import axios from 'axios';\r\n  \r\n  export default {\r\n    name: 'SearchResults',\r\n    data() {\r\n      return {\r\n        searchResults: [],\r\n        loading: true,\r\n        error: null,\r\n        searchQuery: ''\r\n      };\r\n    },\r\n    async created() {\r\n      this.searchQuery = this.$route.params.query;\r\n      await this.fetchSearchResults();\r\n    },\r\n    watch: {\r\n      // Watch for route changes to update results when search query changes\r\n      '$route.params.query': {\r\n        handler: async function(newQuery) {\r\n          this.searchQuery = newQuery;\r\n          await this.fetchSearchResults();\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      async fetchSearchResults() {\r\n        this.loading = true;\r\n        this.error = null;\r\n        \r\n        try {\r\n          const response = await axios.get(`http://localhost:3000/musics/search/${this.searchQuery}`);\r\n          this.searchResults = response.data;\r\n        } catch (error) {\r\n          console.error('Error fetching search results:', error);\r\n          this.error = 'เกิดข้อผิดพลาดในการค้นหา กรุณาลองใหม่อีกครั้ง';\r\n        } finally {\r\n          this.loading = false;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .card-img-top {\r\n    height: 200px;\r\n    object-fit: cover;\r\n  }\r\n  </style>"],"mappings":"AAkCE,OAAOA,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAI,EAAE,eAAe;EACrBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,aAAa,EAAE,EAAE;MACjBC,OAAO,EAAE,IAAI;MACbC,KAAK,EAAE,IAAI;MACXC,WAAW,EAAE;IACf,CAAC;EACH,CAAC;EACD,MAAMC,OAAOA,CAAA,EAAG;IACd,IAAI,CAACD,WAAU,GAAI,IAAI,CAACE,MAAM,CAACC,MAAM,CAACC,KAAK;IAC3C,MAAM,IAAI,CAACC,kBAAkB,CAAC,CAAC;EACjC,CAAC;EACDC,KAAK,EAAE;IACL;IACA,qBAAqB,EAAE;MACrBC,OAAO,EAAE,eAAAA,CAAeC,QAAQ,EAAE;QAChC,IAAI,CAACR,WAAU,GAAIQ,QAAQ;QAC3B,MAAM,IAAI,CAACH,kBAAkB,CAAC,CAAC;MACjC;IACF;EACF,CAAC;EACDI,OAAO,EAAE;IACP,MAAMJ,kBAAkBA,CAAA,EAAG;MACzB,IAAI,CAACP,OAAM,GAAI,IAAI;MACnB,IAAI,CAACC,KAAI,GAAI,IAAI;MAEjB,IAAI;QACF,MAAMW,QAAO,GAAI,MAAMhB,KAAK,CAACiB,GAAG,CAAC,uCAAuC,IAAI,CAACX,WAAW,EAAE,CAAC;QAC3F,IAAI,CAACH,aAAY,GAAIa,QAAQ,CAACd,IAAI;MACpC,EAAE,OAAOG,KAAK,EAAE;QACda,OAAO,CAACb,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;QACtD,IAAI,CAACA,KAAI,GAAI,+CAA+C;MAC9D,UAAU;QACR,IAAI,CAACD,OAAM,GAAI,KAAK;MACtB;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}