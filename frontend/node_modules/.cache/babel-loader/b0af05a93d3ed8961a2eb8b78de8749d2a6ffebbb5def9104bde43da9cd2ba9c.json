{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, Fragment as _Fragment, renderList as _renderList, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-20e30c54\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"container mt-4\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"row mb-4\"\n};\nconst _hoisted_3 = {\n  class: \"col-12\"\n};\nconst _hoisted_4 = {\n  class: \"card\"\n};\nconst _hoisted_5 = {\n  class: \"card-body\"\n};\nconst _hoisted_6 = {\n  class: \"ratio ratio-16x9\"\n};\nconst _hoisted_7 = [\"src\"];\nconst _hoisted_8 = {\n  class: \"mt-3\"\n};\nconst _hoisted_9 = {\n  class: \"row\"\n};\nconst _hoisted_10 = {\n  class: \"col-12\"\n};\nconst _hoisted_11 = {\n  key: 0\n};\nconst _hoisted_12 = {\n  key: 1\n};\nconst _hoisted_13 = {\n  key: 2,\n  class: \"text-center my-5\"\n};\nconst _hoisted_14 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"spinner-border text-primary\",\n  role: \"status\"\n}, [/*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"visually-hidden\"\n}, \"Loading...\")], -1 /* HOISTED */));\nconst _hoisted_15 = [_hoisted_14];\nconst _hoisted_16 = {\n  class: \"alert alert-danger\",\n  role: \"alert\"\n};\nconst _hoisted_17 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"alert alert-warning\",\n  role: \"alert\"\n}, \" ไม่สามารถพบเพลง \", -1 /* HOISTED */));\nconst _hoisted_18 = {\n  class: \"row row-cols-1 row-cols-md-3 g-4\"\n};\nconst _hoisted_19 = {\n  class: \"card h-100\"\n};\nconst _hoisted_20 = {\n  class: \"card-body\"\n};\nconst _hoisted_21 = {\n  class: \"card-title\"\n};\nconst _hoisted_22 = {\n  class: \"card-text\"\n};\nconst _hoisted_23 = {\n  class: \"card-text\"\n};\nconst _hoisted_24 = {\n  class: \"text-muted\"\n};\nconst _hoisted_25 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" Current Playing Section \"), $data.currentPlaying ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"iframe\", {\n    src: $data.currentPlaying.ms_path,\n    title: \"YouTube video player\",\n    frameborder: \"0\",\n    allow: \"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\",\n    allowfullscreen: \"\"\n  }, null, 8 /* PROPS */, _hoisted_7)]), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"h3\", null, _toDisplayString($data.currentPlaying.ms_name), 1 /* TEXT */), _createElementVNode(\"p\", null, \"Album: \" + _toDisplayString($data.currentPlaying.ms_album), 1 /* TEXT */), _createElementVNode(\"p\", null, \"Type: \" + _toDisplayString($data.currentPlaying.ms_type), 1 /* TEXT */), _createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.stopPlaying && $options.stopPlaying(...args)),\n    class: \"btn btn-danger\"\n  }, \"Stop Playing\")])])])])])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Music List Section \"), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, [$data.searchQuery ? (_openBlock(), _createElementBlock(\"h2\", _hoisted_11, \"Search Results for: \\\"\" + _toDisplayString($data.searchQuery) + \"\\\"\", 1 /* TEXT */)) : (_openBlock(), _createElementBlock(\"h2\", _hoisted_12, \"All Music\")), _createCommentVNode(\" Loading State \"), $data.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [..._hoisted_15])) : $data.error ? (_openBlock(), _createElementBlock(_Fragment, {\n    key: 3\n  }, [_createCommentVNode(\" Error State \"), _createElementVNode(\"div\", _hoisted_16, _toDisplayString($data.error), 1 /* TEXT */)], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */)) : $data.musicList.length === 0 ? (_openBlock(), _createElementBlock(_Fragment, {\n    key: 4\n  }, [_createCommentVNode(\" No Results State \"), _hoisted_17], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */)) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 5\n  }, [_createCommentVNode(\" Music Grid \"), _createElementVNode(\"div\", _hoisted_18, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.musicList, music => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: music.ms_id,\n      class: \"col\"\n    }, [_createElementVNode(\"div\", _hoisted_19, [_createElementVNode(\"div\", _hoisted_20, [_createElementVNode(\"h5\", _hoisted_21, _toDisplayString(music.ms_name), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_22, \"Album: \" + _toDisplayString(music.ms_album), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_23, [_createElementVNode(\"small\", _hoisted_24, _toDisplayString(music.ms_type), 1 /* TEXT */)]), _createElementVNode(\"button\", {\n      onClick: $event => $options.playMusic(music),\n      class: \"btn btn-primary w-100\"\n    }, \" Play \", 8 /* PROPS */, _hoisted_25)])])]);\n  }), 128 /* KEYED_FRAGMENT */))])], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))])])]);\n}","map":{"version":3,"names":["class","key","_createElementVNode","role","_hoisted_14","_createElementBlock","_hoisted_1","_createCommentVNode","$data","currentPlaying","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","src","ms_path","title","frameborder","allow","allowfullscreen","_hoisted_7","_hoisted_8","_toDisplayString","ms_name","ms_album","ms_type","onClick","_cache","args","$options","stopPlaying","_hoisted_9","_hoisted_10","searchQuery","_hoisted_11","_hoisted_12","loading","_hoisted_13","_hoisted_15","error","_Fragment","_hoisted_16","musicList","length","_hoisted_17","_hoisted_18","_renderList","music","ms_id","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","$event","playMusic","_hoisted_25"],"sources":["/Users/addeen/Desktop/project/frontend/src/components/PageMusic.vue"],"sourcesContent":["<template>\r\n    <div class=\"container mt-4\">\r\n      <!-- Current Playing Section -->\r\n      <div v-if=\"currentPlaying\" class=\"row mb-4\">\r\n        <div class=\"col-12\">\r\n          <div class=\"card\">\r\n            <div class=\"card-body\">\r\n              <div class=\"ratio ratio-16x9\">\r\n                <iframe \r\n                  :src=\"currentPlaying.ms_path\" \r\n                  title=\"YouTube video player\" \r\n                  frameborder=\"0\"\r\n                  allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n                  allowfullscreen>\r\n                </iframe>\r\n              </div>\r\n              <div class=\"mt-3\">\r\n                <h3>{{ currentPlaying.ms_name }}</h3>\r\n                <p>Album: {{ currentPlaying.ms_album }}</p>\r\n                <p>Type: {{ currentPlaying.ms_type }}</p>\r\n                <button @click=\"stopPlaying\" class=\"btn btn-danger\">Stop Playing</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n  \r\n      <!-- Music List Section -->\r\n      <div class=\"row\">\r\n        <div class=\"col-12\">\r\n          <h2 v-if=\"searchQuery\">Search Results for: \"{{ searchQuery }}\"</h2>\r\n          <h2 v-else>All Music</h2>\r\n  \r\n          <!-- Loading State -->\r\n          <div v-if=\"loading\" class=\"text-center my-5\">\r\n            <div class=\"spinner-border text-primary\" role=\"status\">\r\n              <span class=\"visually-hidden\">Loading...</span>\r\n            </div>\r\n          </div>\r\n  \r\n          <!-- Error State -->\r\n          <div v-else-if=\"error\" class=\"alert alert-danger\" role=\"alert\">\r\n            {{ error }}\r\n          </div>\r\n  \r\n          <!-- No Results State -->\r\n          <div v-else-if=\"musicList.length === 0\" class=\"alert alert-warning\" role=\"alert\">\r\n            ไม่สามารถพบเพลง\r\n          </div>\r\n  \r\n          <!-- Music Grid -->\r\n          <div v-else class=\"row row-cols-1 row-cols-md-3 g-4\">\r\n            <div v-for=\"music in musicList\" :key=\"music.ms_id\" class=\"col\">\r\n              <div class=\"card h-100\">\r\n                <div class=\"card-body\">\r\n                  <h5 class=\"card-title\">{{ music.ms_name }}</h5>\r\n                  <p class=\"card-text\">Album: {{ music.ms_album }}</p>\r\n                  <p class=\"card-text\">\r\n                    <small class=\"text-muted\">\r\n                      {{ music.ms_type }}\r\n                    </small>\r\n                  </p>\r\n                  <button \r\n                    @click=\"playMusic(music)\" \r\n                    class=\"btn btn-primary w-100\"\r\n                  >\r\n                    Play\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import axios from 'axios';\r\n  \r\n  export default {\r\n    name: 'PageMusic',\r\n    data() {\r\n      return {\r\n        musicList: [],\r\n        currentPlaying: null,\r\n        loading: true,\r\n        error: null,\r\n        searchQuery: null\r\n      }\r\n    },\r\n    async created() {\r\n      // Check if there's a search query in the route params\r\n      this.searchQuery = this.$route.params.query;\r\n      if (this.searchQuery) {\r\n        await this.searchMusic();\r\n      } else {\r\n        await this.fetchAllMusic();\r\n      }\r\n    },\r\n    watch: {\r\n      // Watch for route changes to handle new searches\r\n      '$route.params.query': {\r\n        handler: async function(newQuery) {\r\n          this.searchQuery = newQuery;\r\n          if (newQuery) {\r\n            await this.searchMusic();\r\n          } else {\r\n            await this.fetchAllMusic();\r\n          }\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      async fetchAllMusic() {\r\n        this.loading = true;\r\n        try {\r\n          const response = await axios.get('http://localhost:3000/musics');\r\n          this.musicList = response.data;\r\n        } catch (err) {\r\n          console.error('Error fetching music:', err);\r\n          this.error = 'Failed to load music list';\r\n        } finally {\r\n          this.loading = false;\r\n        }\r\n      },\r\n      async searchMusic() {\r\n        this.loading = true;\r\n        try {\r\n          const response = await axios.get(`http://localhost:3000/musics/search/${this.searchQuery}`);\r\n          this.musicList = response.data;\r\n        } catch (err) {\r\n          console.error('Error searching music:', err);\r\n          this.error = 'Failed to search music';\r\n        } finally {\r\n          this.loading = false;\r\n        }\r\n      },\r\n      playMusic(music) {\r\n        this.currentPlaying = music;\r\n        // Scroll to top to show the player\r\n        window.scrollTo({ top: 0, behavior: 'smooth' });\r\n      },\r\n      stopPlaying() {\r\n        this.currentPlaying = null;\r\n      }\r\n    }\r\n  }\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .card {\r\n    transition: transform 0.2s;\r\n  }\r\n  \r\n  .card:hover {\r\n    transform: translateY(-5px);\r\n  }\r\n  \r\n  .btn-primary {\r\n    background-color: #BD1D04;\r\n    border-color: #BD1D04;\r\n  }\r\n  \r\n  .btn-primary:hover {\r\n    background-color: #a11803;\r\n    border-color: #a11803;\r\n  }\r\n  \r\n  .btn-danger {\r\n    background-color: #dc3545;\r\n    border-color: #dc3545;\r\n  }\r\n  \r\n  .btn-danger:hover {\r\n    background-color: #bb2d3b;\r\n    border-color: #bb2d3b;\r\n  }\r\n  </style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}