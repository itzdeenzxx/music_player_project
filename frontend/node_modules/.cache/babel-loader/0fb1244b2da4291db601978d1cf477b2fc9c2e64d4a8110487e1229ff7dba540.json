{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-20e30c54\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"container mt-4\"\n};\nconst _hoisted_2 = {\n  class: \"row\"\n};\nconst _hoisted_3 = {\n  key: 0,\n  class: \"col-12 mb-4\"\n};\nconst _hoisted_4 = {\n  class: \"card\"\n};\nconst _hoisted_5 = {\n  class: \"card-body\"\n};\nconst _hoisted_6 = {\n  class: \"ratio ratio-16x9\"\n};\nconst _hoisted_7 = [\"src\"];\nconst _hoisted_8 = {\n  class: \"mt-3\"\n};\nconst _hoisted_9 = {\n  class: \"text-muted\"\n};\nconst _hoisted_10 = {\n  class: \"btn-group\"\n};\nconst _hoisted_11 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fas fa-stop\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_12 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fas fa-heart\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_13 = {\n  class: \"col-12\"\n};\nconst _hoisted_14 = {\n  class: \"mb-4\"\n};\nconst _hoisted_15 = {\n  key: 0,\n  class: \"text-center py-5\"\n};\nconst _hoisted_16 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"spinner-border text-primary\",\n  role: \"status\"\n}, [/*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"visually-hidden\"\n}, \"Loading...\")], -1 /* HOISTED */));\nconst _hoisted_17 = [_hoisted_16];\nconst _hoisted_18 = {\n  key: 1,\n  class: \"alert alert-warning\",\n  role: \"alert\"\n};\nconst _hoisted_19 = {\n  key: 2,\n  class: \"alert alert-info\",\n  role: \"alert\"\n};\nconst _hoisted_20 = {\n  key: 3,\n  class: \"row row-cols-1 row-cols-md-3 g-4\"\n};\nconst _hoisted_21 = {\n  class: \"card h-100 music-card\"\n};\nconst _hoisted_22 = {\n  class: \"card-body\"\n};\nconst _hoisted_23 = {\n  class: \"card-title\"\n};\nconst _hoisted_24 = {\n  class: \"card-text\"\n};\nconst _hoisted_25 = {\n  class: \"text-muted\"\n};\nconst _hoisted_26 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_27 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_28 = {\n  class: \"d-grid gap-2\"\n};\nconst _hoisted_29 = [\"onClick\"];\nconst _hoisted_30 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fas fa-play\"\n}, null, -1 /* HOISTED */));\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" Music Player Section \"), $data.selectedMusic ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"iframe\", {\n    src: $data.selectedMusic.ms_path,\n    title: \"YouTube video player\",\n    allow: \"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\",\n    allowfullscreen: \"\"\n  }, null, 8 /* PROPS */, _hoisted_7)]), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"h4\", null, _toDisplayString($data.selectedMusic.ms_name), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_9, \" Album: \" + _toDisplayString($data.selectedMusic.ms_album) + \" • Type: \" + _toDisplayString($data.selectedMusic.ms_type) + \" • Duration: \" + _toDisplayString($options.formatDuration($data.selectedMusic.ms_duration)), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.stopVideo && $options.stopVideo(...args)),\n    class: \"btn btn-danger\"\n  }, [_hoisted_11, _createTextVNode(\" Stop \")]), _createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = $event => $options.addToFavorites($data.selectedMusic)),\n    class: \"btn btn-outline-primary\"\n  }, [_hoisted_12, _createTextVNode(\" Add to Favorites \")])])])])])])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Music Grid \"), _createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"h2\", _hoisted_14, _toDisplayString($data.title), 1 /* TEXT */), $data.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [..._hoisted_17])) : $data.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_18, _toDisplayString($data.error), 1 /* TEXT */)) : $data.musicList.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_19, \" ไม่สามารถพบเพลง \")) : (_openBlock(), _createElementBlock(\"div\", _hoisted_20, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.musicList, music => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: music.ms_id,\n      class: \"col\"\n    }, [_createElementVNode(\"div\", _hoisted_21, [_createElementVNode(\"div\", _hoisted_22, [_createElementVNode(\"h5\", _hoisted_23, _toDisplayString(music.ms_name), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_24, [_createElementVNode(\"small\", _hoisted_25, [_createTextVNode(\" Album: \" + _toDisplayString(music.ms_album), 1 /* TEXT */), _hoisted_26, _createTextVNode(\" Type: \" + _toDisplayString(music.ms_type), 1 /* TEXT */), _hoisted_27, _createTextVNode(\" Duration: \" + _toDisplayString($options.formatDuration(music.ms_duration)), 1 /* TEXT */)])]), _createElementVNode(\"div\", _hoisted_28, [_createElementVNode(\"button\", {\n      onClick: $event => $options.playMusic(music),\n      class: \"btn btn-primary\"\n    }, [_hoisted_30, _createTextVNode(\" Play \")], 8 /* PROPS */, _hoisted_29)])])])]);\n  }), 128 /* KEYED_FRAGMENT */))]))])])]);\n}","map":{"version":3,"names":["class","key","_createElementVNode","role","_hoisted_16","_createElementBlock","_hoisted_1","_hoisted_2","_createCommentVNode","$data","selectedMusic","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","src","ms_path","title","allow","allowfullscreen","_hoisted_7","_hoisted_8","_toDisplayString","ms_name","_hoisted_9","ms_album","ms_type","$options","formatDuration","ms_duration","_hoisted_10","onClick","_cache","args","stopVideo","_hoisted_11","_createTextVNode","$event","addToFavorites","_hoisted_12","_hoisted_13","_hoisted_14","loading","_hoisted_15","_hoisted_17","error","_hoisted_18","musicList","length","_hoisted_19","_hoisted_20","_Fragment","_renderList","music","ms_id","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","playMusic","_hoisted_30","_hoisted_29"],"sources":["/Users/addeen/Desktop/project/frontend/src/components/PageMusic.vue"],"sourcesContent":["<template>\r\n    <div class=\"container mt-4\">\r\n      <div class=\"row\">\r\n        <!-- Music Player Section -->\r\n        <div v-if=\"selectedMusic\" class=\"col-12 mb-4\">\r\n          <div class=\"card\">\r\n            <div class=\"card-body\">\r\n              <div class=\"ratio ratio-16x9\">\r\n                <iframe \r\n                  :src=\"selectedMusic.ms_path\" \r\n                  title=\"YouTube video player\" \r\n                  allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n                  allowfullscreen>\r\n                </iframe>\r\n              </div>\r\n              <div class=\"mt-3\">\r\n                <h4>{{ selectedMusic.ms_name }}</h4>\r\n                <p class=\"text-muted\">\r\n                  Album: {{ selectedMusic.ms_album }} • \r\n                  Type: {{ selectedMusic.ms_type }} • \r\n                  Duration: {{ formatDuration(selectedMusic.ms_duration) }}\r\n                </p>\r\n                <div class=\"btn-group\">\r\n                  <button @click=\"stopVideo\" class=\"btn btn-danger\">\r\n                    <i class=\"fas fa-stop\"></i> Stop\r\n                  </button>\r\n                  <button @click=\"addToFavorites(selectedMusic)\" class=\"btn btn-outline-primary\">\r\n                    <i class=\"fas fa-heart\"></i> Add to Favorites\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n  \r\n        <!-- Music Grid -->\r\n        <div class=\"col-12\">\r\n          <h2 class=\"mb-4\">{{ title }}</h2>\r\n          \r\n          <div v-if=\"loading\" class=\"text-center py-5\">\r\n            <div class=\"spinner-border text-primary\" role=\"status\">\r\n              <span class=\"visually-hidden\">Loading...</span>\r\n            </div>\r\n          </div>\r\n  \r\n          <div v-else-if=\"error\" class=\"alert alert-warning\" role=\"alert\">\r\n            {{ error }}\r\n          </div>\r\n  \r\n          <div v-else-if=\"musicList.length === 0\" class=\"alert alert-info\" role=\"alert\">\r\n            ไม่สามารถพบเพลง\r\n          </div>\r\n  \r\n          <div v-else class=\"row row-cols-1 row-cols-md-3 g-4\">\r\n            <div v-for=\"music in musicList\" :key=\"music.ms_id\" class=\"col\">\r\n              <div class=\"card h-100 music-card\">\r\n                <div class=\"card-body\">\r\n                  <h5 class=\"card-title\">{{ music.ms_name }}</h5>\r\n                  <p class=\"card-text\">\r\n                    <small class=\"text-muted\">\r\n                      Album: {{ music.ms_album }}<br>\r\n                      Type: {{ music.ms_type }}<br>\r\n                      Duration: {{ formatDuration(music.ms_duration) }}\r\n                    </small>\r\n                  </p>\r\n                  <div class=\"d-grid gap-2\">\r\n                    <button \r\n                      @click=\"playMusic(music)\" \r\n                      class=\"btn btn-primary\"\r\n                    >\r\n                      <i class=\"fas fa-play\"></i> Play\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import axios from 'axios';\r\n  \r\n  export default {\r\n    name: 'PageMusic',\r\n    data() {\r\n      return {\r\n        musicList: [],\r\n        selectedMusic: null,\r\n        loading: true,\r\n        error: null,\r\n        title: 'All Music'\r\n      };\r\n    },\r\n    async created() {\r\n      // If there's a search query parameter, use it to filter music\r\n      const searchQuery = this.$route.params.query;\r\n      if (searchQuery) {\r\n        this.title = `Search Results: \"${searchQuery}\"`;\r\n        await this.searchMusic(searchQuery);\r\n      } else {\r\n        await this.fetchAllMusic();\r\n      }\r\n    },\r\n    watch: {\r\n      '$route.params.query': {\r\n        handler: async function(newQuery) {\r\n          if (newQuery) {\r\n            this.title = `Search Results: \"${newQuery}\"`;\r\n            await this.searchMusic(newQuery);\r\n          } else {\r\n            this.title = 'All Music';\r\n            await this.fetchAllMusic();\r\n          }\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      async fetchAllMusic() {\r\n        this.loading = true;\r\n        try {\r\n          const response = await axios.get('http://localhost:3000/musics');\r\n          this.musicList = response.data;\r\n        } catch (error) {\r\n          console.error('Error fetching music:', error);\r\n          this.error = 'Failed to load music. Please try again later.';\r\n        } finally {\r\n          this.loading = false;\r\n        }\r\n      },\r\n      async searchMusic(query) {\r\n        this.loading = true;\r\n        try {\r\n          const response = await axios.get(`http://localhost:3000/musics/search/${query}`);\r\n          this.musicList = response.data;\r\n        } catch (error) {\r\n          console.error('Error searching music:', error);\r\n          this.error = 'Failed to search music. Please try again later.';\r\n        } finally {\r\n          this.loading = false;\r\n        }\r\n      },\r\n      playMusic(music) {\r\n        this.selectedMusic = music;\r\n        // Scroll to top where the player is\r\n        window.scrollTo({ top: 0, behavior: 'smooth' });\r\n      },\r\n      stopVideo() {\r\n        this.selectedMusic = null;\r\n      },\r\n      formatDuration(seconds) {\r\n        const minutes = Math.floor(seconds / 60);\r\n        const remainingSeconds = seconds % 60;\r\n        return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;\r\n      },\r\n      async addToFavorites(music) {\r\n        try {\r\n          await axios.post('http://localhost:3000/favorites/add', {\r\n            musicId: music.ms_id\r\n          });\r\n          alert('Added to favorites successfully!');\r\n        } catch (error) {\r\n          console.error('Error adding to favorites:', error);\r\n          alert('Failed to add to favorites. Please try again.');\r\n        }\r\n      }\r\n    }\r\n  };\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .music-card {\r\n    transition: transform 0.2s;\r\n  }\r\n  \r\n  .music-card:hover {\r\n    transform: translateY(-5px);\r\n  }\r\n  \r\n  .btn-group {\r\n    display: flex;\r\n    gap: 0.5rem;\r\n  }\r\n  \r\n  /* Ensure buttons have consistent width */\r\n  .btn-group .btn {\r\n    flex: 1;\r\n  }\r\n  </style>"],"mappings":";;;EACSA,KAAK,EAAC;AAAgB;;EACpBA,KAAK,EAAC;AAAK;;EAFtBC,GAAA;EAIkCD,KAAK,EAAC;;;EACzBA,KAAK,EAAC;AAAM;;EACVA,KAAK,EAAC;AAAW;;EACfA,KAAK,EAAC;AAAkB;mBAP3C;;EAemBA,KAAK,EAAC;AAAM;;EAEZA,KAAK,EAAC;AAAY;;EAKhBA,KAAK,EAAC;AAAW;iEAElBE,mBAAA,CAA2B;EAAxBF,KAAK,EAAC;AAAa;iEAGtBE,mBAAA,CAA4B;EAAzBF,KAAK,EAAC;AAAc;;EAS9BA,KAAK,EAAC;AAAQ;;EACbA,KAAK,EAAC;AAAM;;EArC1BC,GAAA;EAuC8BD,KAAK,EAAC;;iEACxBE,mBAAA,CAEM;EAFDF,KAAK,EAAC,6BAA6B;EAACG,IAAI,EAAC;iBAC5CD,mBAAA,CAA+C;EAAzCF,KAAK,EAAC;AAAiB,GAAC,YAAU,E;qBAD1CI,WAEM,C;;EA1ClBH,GAAA;EA6CiCD,KAAK,EAAC,qBAAqB;EAACG,IAAI,EAAC;;;EA7ClEF,GAAA;EAiDkDD,KAAK,EAAC,kBAAkB;EAACG,IAAI,EAAC;;;EAjDhFF,GAAA;EAqDsBD,KAAK,EAAC;;;EAETA,KAAK,EAAC;AAAuB;;EAC3BA,KAAK,EAAC;AAAW;;EAChBA,KAAK,EAAC;AAAY;;EACnBA,KAAK,EAAC;AAAW;;EACXA,KAAK,EAAC;AAAY;iEACIE,mBAAA,CAAI;iEACNA,mBAAA,CAAI;;EAI5BF,KAAK,EAAC;AAAc;oBAjE3C;iEAsEsBE,mBAAA,CAA2B;EAAxBF,KAAK,EAAC;AAAa;;uBArExCK,mBAAA,CA8EM,OA9ENC,UA8EM,GA7EJJ,mBAAA,CA4EM,OA5ENK,UA4EM,GA3EJC,mBAAA,0BAA6B,EAClBC,KAAA,CAAAC,aAAa,I,cAAxBL,mBAAA,CA6BM,OA7BNM,UA6BM,GA5BJT,mBAAA,CA2BM,OA3BNU,UA2BM,GA1BJV,mBAAA,CAyBM,OAzBNW,UAyBM,GAxBJX,mBAAA,CAOM,OAPNY,UAOM,GANJZ,mBAAA,CAKS;IAJNa,GAAG,EAAEN,KAAA,CAAAC,aAAa,CAACM,OAAO;IAC3BC,KAAK,EAAC,sBAAsB;IAC5BC,KAAK,EAAC,0FAA0F;IAChGC,eAAe,EAAf;0BAZlBC,UAAA,E,GAeclB,mBAAA,CAeM,OAfNmB,UAeM,GAdJnB,mBAAA,CAAoC,YAAAoB,gBAAA,CAA7Bb,KAAA,CAAAC,aAAa,CAACa,OAAO,kBAC5BrB,mBAAA,CAII,KAJJsB,UAII,EAJkB,UACb,GAAAF,gBAAA,CAAGb,KAAA,CAAAC,aAAa,CAACe,QAAQ,IAAG,WAC7B,GAAAH,gBAAA,CAAGb,KAAA,CAAAC,aAAa,CAACgB,OAAO,IAAG,eACvB,GAAAJ,gBAAA,CAAGK,QAAA,CAAAC,cAAc,CAACnB,KAAA,CAAAC,aAAa,CAACmB,WAAW,mBAEvD3B,mBAAA,CAOM,OAPN4B,WAOM,GANJ5B,mBAAA,CAES;IAFA6B,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEN,QAAA,CAAAO,SAAA,IAAAP,QAAA,CAAAO,SAAA,IAAAD,IAAA,CAAS;IAAEjC,KAAK,EAAC;MAC/BmC,WAA2B,EAxB/CC,gBAAA,CAwB+C,QAC7B,E,GACAlC,mBAAA,CAES;IAFA6B,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAK,MAAA,IAAEV,QAAA,CAAAW,cAAc,CAAC7B,KAAA,CAAAC,aAAa;IAAGV,KAAK,EAAC;MACnDuC,WAA4B,EA3BhDH,gBAAA,CA2BgD,oBAC9B,E,eA5BlB5B,mBAAA,gBAmCQA,mBAAA,gBAAmB,EACnBN,mBAAA,CAyCM,OAzCNsC,WAyCM,GAxCJtC,mBAAA,CAAiC,MAAjCuC,WAAiC,EAAAnB,gBAAA,CAAbb,KAAA,CAAAQ,KAAK,kBAEdR,KAAA,CAAAiC,OAAO,I,cAAlBrC,mBAAA,CAIM,OAJNsC,WAIM,EA3ChB,IAAAC,WAAA,MA6C0BnC,KAAA,CAAAoC,KAAK,I,cAArBxC,mBAAA,CAEM,OAFNyC,WAEM,EAAAxB,gBAAA,CADDb,KAAA,CAAAoC,KAAK,oBAGMpC,KAAA,CAAAsC,SAAS,CAACC,MAAM,U,cAAhC3C,mBAAA,CAEM,OAFN4C,WAEM,EAFwE,mBAE9E,M,cAEA5C,mBAAA,CAuBM,OAvBN6C,WAuBM,I,kBAtBJ7C,mBAAA,CAqBM8C,SAAA,QA3ElBC,WAAA,CAsDiC3C,KAAA,CAAAsC,SAAS,EAAlBM,KAAK;yBAAjBhD,mBAAA,CAqBM;MArB2BJ,GAAG,EAAEoD,KAAK,CAACC,KAAK;MAAEtD,KAAK,EAAC;QACvDE,mBAAA,CAmBM,OAnBNqD,WAmBM,GAlBJrD,mBAAA,CAiBM,OAjBNsD,WAiBM,GAhBJtD,mBAAA,CAA+C,MAA/CuD,WAA+C,EAAAnC,gBAAA,CAArB+B,KAAK,CAAC9B,OAAO,kBACvCrB,mBAAA,CAMI,KANJwD,WAMI,GALFxD,mBAAA,CAIQ,SAJRyD,WAIQ,GA/D5BvB,gBAAA,CA2D8C,UACjB,GAAAd,gBAAA,CAAG+B,KAAK,CAAC5B,QAAQ,kBAAGmC,WAAI,EA5DrDxB,gBAAA,CA4DqD,SACzB,GAAAd,gBAAA,CAAG+B,KAAK,CAAC3B,OAAO,kBAAGmC,WAAI,EA7DnDzB,gBAAA,CA6DmD,aACnB,GAAAd,gBAAA,CAAGK,QAAA,CAAAC,cAAc,CAACyB,KAAK,CAACxB,WAAW,kB,KAGjD3B,mBAAA,CAOM,OAPN4D,WAOM,GANJ5D,mBAAA,CAKS;MAJN6B,OAAK,EAAAM,MAAA,IAAEV,QAAA,CAAAoC,SAAS,CAACV,KAAK;MACvBrD,KAAK,EAAC;QAENgE,WAA2B,EAtEjD5B,gBAAA,CAsEiD,QAC7B,E,iBAvEpB6B,WAAA,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}