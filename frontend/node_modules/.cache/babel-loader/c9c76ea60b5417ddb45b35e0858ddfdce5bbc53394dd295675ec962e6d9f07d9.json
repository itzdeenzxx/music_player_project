{"ast":null,"code":"import axios from 'axios';\naxios.defaults.withCredentials = true;\nexport default {\n  name: \"CartList\",\n  data() {\n    return {\n      memEmail: null,\n      cart: [] //รับข้อมูลตะกร้า\n    };\n  },\n  async mounted() {\n    await this.chkSession(); //อ่านข้อมูลจาก Session\n    await this.getCartList(); //อ่านข้อมูล Cart\n  },\n  methods: {\n    formattedDate(dateStr) {\n      const date = new Date(dateStr);\n      const year = date.getFullYear();\n      const month = String(date.getMonth() + 1).padStart(2, '0'); // เดือนเริ่มต้นที่ 0, จึงต้อง +1\n      const day = String(date.getDate()).padStart(2, '0');\n      return `${year}-${month}-${day}`;\n    },\n    async getCartList() {\n      let customer = {\n        id: this.memEmail\n      };\n      console.log('Get CartLIST');\n      await axios.post(`http://localhost:3000/favs/getcartbycus`, customer).then(res => {\n        console.log(\"Cart \\n\" + res.data);\n        this.cart = res.data;\n        this.cusId = res.data[0].cusId;\n      }).catch(err => {\n        console.error(err);\n      });\n    },\n    async chkSession() {\n      await axios.get(`http://localhost:3000/users/getss`).then(res => {\n        console.log(res.data);\n        this.memEmail = res.data.email;\n      }).catch(err => {\n        console.error(err);\n      });\n    }\n  }\n};","map":{"version":3,"names":["axios","defaults","withCredentials","name","data","memEmail","cart","mounted","chkSession","getCartList","methods","formattedDate","dateStr","date","Date","year","getFullYear","month","String","getMonth","padStart","day","getDate","customer","id","console","log","post","then","res","cusId","catch","err","error","get","email"],"sources":["/Users/addeen/Desktop/project/frontend/src/components/CartList.vue"],"sourcesContent":["<template>\r\n    <div>\r\n    <H1>{{ memEmail }}</H1>\r\n    <table class=\"table\">\r\n        <tr class=\"bg-secondary bg-opacity-10\" style=\"height: 30px;\">\r\n                <td></td>\r\n                <td>เลขที่</td>\r\n                <td>วันที่</td>\r\n                <td class=\"text-center\">จำนวน</td>\r\n                <td class=\"text-end\">ยอดเงิน</td>\r\n                <td></td>\r\n            </tr>\r\n            <tr v-for=\"(ct, cartId) in cart\" :key=\"cartId\" style=\"height: 30px;\" >\r\n                <td>{{ ct.row_number }}</td>\r\n                <td><span class=\"text-primary\">\r\n                    <router-link :to=\"`/cartshow/${ct.cartId }`\" style=\"text-decoration: none;\">\r\n                        {{ ct.cartId }}\r\n                    </router-link>\r\n                </span>\r\n            </td>\r\n            <td>{{ formattedDate(ct.cartDate) }}</td>\r\n            <td class=\"text-center\">{{ ct.sqty }}</td>\r\n            <td class=\"text-end\">{{ ct.sprice.toLocaleString()}}</td>\r\n            <td class=\"text-center\">\r\n                <i class=\"bi-x-lg text-danger\"></i>\r\n            </td>\r\n        </tr>\r\n    </table>\r\n</div>\r\n</template>\r\n<script>\r\nimport axios from 'axios';\r\naxios.defaults.withCredentials = true\r\nexport default {\r\n    name:\"CartList\",\r\n    data(){\r\n        return{\r\n            memEmail:null,\r\n            cart:[] //รับข้อมูลตะกร้า\r\n        }\r\n    },\r\n    async mounted(){\r\n        await this.chkSession() //อ่านข้อมูลจาก Session\r\n        await this.getCartList() //อ่านข้อมูล Cart\r\n    },\r\n    methods:{\r\n        formattedDate(dateStr) {\r\n            const date = new Date(dateStr);\r\n            const year = date.getFullYear();\r\n            const month = String(date.getMonth()+ 1).padStart(2, '0'); // เดือนเริ่มต้นที่ 0, จึงต้อง +1\r\n            const day = String(date.getDate()).padStart(2, '0');\r\n            return `${year}-${month}-${day}`;\r\n        },\r\n        async getCartList() {\r\n            let customer = {\r\n                id:this.memEmail\r\n            }\r\n            console.log('Get CartLIST')\r\n            await axios.post(`http://localhost:3000/favs/getcartbycus`,customer)\r\n                .then(res => {\r\n                    console.log(\"Cart \\n\" + res.data)\r\n                    this.cart = res.data\r\n                    this.cusId = res.data[0].cusId\r\n                })\r\n                .catch(err => {\r\n                    console.error(err);\r\n                });\r\n        },\r\n        async chkSession() {\r\n            await axios.get(`http://localhost:3000/users/getss`)\r\n            .then(res => {\r\n                console.log(res.data)\r\n                this.memEmail = res.data.email\r\n            })\r\n            .catch(err => {\r\n                console.error(err);\r\n            });\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style></style>"],"mappings":"AA+BA,OAAOA,KAAI,MAAO,OAAO;AACzBA,KAAK,CAACC,QAAQ,CAACC,eAAc,GAAI,IAAG;AACpC,eAAe;EACXC,IAAI,EAAC,UAAU;EACfC,IAAIA,CAAA,EAAE;IACF,OAAM;MACFC,QAAQ,EAAC,IAAI;MACbC,IAAI,EAAC,EAAC,CAAE;IACZ;EACJ,CAAC;EACD,MAAMC,OAAOA,CAAA,EAAE;IACX,MAAM,IAAI,CAACC,UAAU,CAAC,GAAE;IACxB,MAAM,IAAI,CAACC,WAAW,CAAC,GAAE;EAC7B,CAAC;EACDC,OAAO,EAAC;IACJC,aAAaA,CAACC,OAAO,EAAE;MACnB,MAAMC,IAAG,GAAI,IAAIC,IAAI,CAACF,OAAO,CAAC;MAC9B,MAAMG,IAAG,GAAIF,IAAI,CAACG,WAAW,CAAC,CAAC;MAC/B,MAAMC,KAAI,GAAIC,MAAM,CAACL,IAAI,CAACM,QAAQ,CAAC,CAAC,GAAE,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE;MAC3D,MAAMC,GAAE,GAAIH,MAAM,CAACL,IAAI,CAACS,OAAO,CAAC,CAAC,CAAC,CAACF,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC;MACnD,OAAO,GAAGL,IAAI,IAAIE,KAAK,IAAII,GAAG,EAAE;IACpC,CAAC;IACD,MAAMZ,WAAWA,CAAA,EAAG;MAChB,IAAIc,QAAO,GAAI;QACXC,EAAE,EAAC,IAAI,CAACnB;MACZ;MACAoB,OAAO,CAACC,GAAG,CAAC,cAAc;MAC1B,MAAM1B,KAAK,CAAC2B,IAAI,CAAC,yCAAyC,EAACJ,QAAQ,EAC9DK,IAAI,CAACC,GAAE,IAAK;QACTJ,OAAO,CAACC,GAAG,CAAC,SAAQ,GAAIG,GAAG,CAACzB,IAAI;QAChC,IAAI,CAACE,IAAG,GAAIuB,GAAG,CAACzB,IAAG;QACnB,IAAI,CAAC0B,KAAI,GAAID,GAAG,CAACzB,IAAI,CAAC,CAAC,CAAC,CAAC0B,KAAI;MACjC,CAAC,EACAC,KAAK,CAACC,GAAE,IAAK;QACVP,OAAO,CAACQ,KAAK,CAACD,GAAG,CAAC;MACtB,CAAC,CAAC;IACV,CAAC;IACD,MAAMxB,UAAUA,CAAA,EAAG;MACf,MAAMR,KAAK,CAACkC,GAAG,CAAC,mCAAmC,EAClDN,IAAI,CAACC,GAAE,IAAK;QACTJ,OAAO,CAACC,GAAG,CAACG,GAAG,CAACzB,IAAI;QACpB,IAAI,CAACC,QAAO,GAAIwB,GAAG,CAACzB,IAAI,CAAC+B,KAAI;MACjC,CAAC,EACAJ,KAAK,CAACC,GAAE,IAAK;QACVP,OAAO,CAACQ,KAAK,CAACD,GAAG,CAAC;MACtB,CAAC,CAAC;IACN;EACJ;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}