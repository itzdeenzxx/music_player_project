{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\naxios.defaults.withCredentials = true;\nimport CartInfo from './CartInfo.vue';\nimport { EventBus } from \"../event-bus\";\nexport default {\n  name: 'MainMenu',\n  components: {\n    CartInfo\n  },\n  data() {\n    return {\n      memName: null,\n      backendmessage: null,\n      searchQuery: '',\n      searchResults: [],\n      searchError: null,\n      isDropdownOpen: false,\n      isScrolled: false\n    };\n  },\n  mounted() {\n    this.memName = sessionStorage.getItem('memName');\n    EventBus.on('loginok', () => {\n      this.memName = sessionStorage.getItem('memName');\n    });\n\n    // Add scroll event listener\n    window.addEventListener('scroll', this.handleScroll);\n  },\n  beforeUnmount() {\n    EventBus.off('loginok');\n    window.removeEventListener('scroll', this.handleScroll);\n  },\n  methods: {\n    handleScroll() {\n      this.isScrolled = window.scrollY > 0;\n    },\n    toggleDropdown() {\n      this.isDropdownOpen = !this.isDropdownOpen;\n    },\n    async handleSearch() {\n      if (!this.searchQuery.trim()) return;\n      try {\n        const response = await axios.get(`http://localhost:3000/musics/search/${this.searchQuery}`);\n        if (response.data && response.data.length > 0) {\n          this.searchResults = response.data;\n          this.$router.push(`/pagemusic/${this.searchQuery}`);\n        } else {\n          this.searchError = 'ไม่สามารถพบเพลง';\n        }\n      } catch (error) {\n        console.error('Search error:', error);\n        this.searchError = 'เกิดข้อผิดพลาดในการค้นหา';\n      }\n    },\n    async memlogout() {\n      EventBus.emit('memlogout');\n      const cf = window.confirm('ต้องการออกจากระบบ?');\n      if (cf) {\n        try {\n          const response = await axios.get(`http://localhost:3000/users/logout`);\n          this.backendMessage = response.data.messagelogout;\n          if (this.backendMessage == 'success') {\n            sessionStorage.clear();\n            this.memName = null;\n            this.$router.push('/');\n          }\n        } catch (err) {\n          console.log(err);\n        }\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","defaults","withCredentials","CartInfo","EventBus","name","components","data","memName","backendmessage","searchQuery","searchResults","searchError","isDropdownOpen","isScrolled","mounted","sessionStorage","getItem","on","window","addEventListener","handleScroll","beforeUnmount","off","removeEventListener","methods","scrollY","toggleDropdown","handleSearch","trim","response","get","length","$router","push","error","console","memlogout","emit","cf","confirm","backendMessage","messagelogout","clear","err","log"],"sources":["/Users/addeen/Desktop/project/frontend/src/components/MainMenu.vue"],"sourcesContent":["<template>\r\n  <nav :class=\"['navbar navbar-expand-lg custom-navbar', { 'navbar-scrolled': isScrolled }]\">\r\n    <div class=\"container-fluid\">\r\n      <!-- Brand Logo -->\r\n      <a class=\"navbar-brand d-flex align-items-center gap-2\" href=\"#\">\r\n        <span class=\"brand-text\">tomat</span>\r\n        <img width=\"28\" height=\"28\" src=\"https://img.icons8.com/fluency/48/tomato.png\" alt=\"tomato\" \r\n          class=\"brand-logo bounce-animation\"/>\r\n        <span class=\"brand-text\">musics</span>\r\n      </a>\r\n\r\n      <!-- Mobile Toggle -->\r\n      <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\"\r\n        aria-controls=\"navbarNav\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n        <span class=\"navbar-toggler-icon\"></span>\r\n      </button>\r\n\r\n      <!-- Navbar Content -->\r\n      <div class=\"collapse navbar-collapse justify-content-between\" id=\"navbarNav\">\r\n        <ul class=\"navbar-nav align-items-center\">\r\n          <!-- Home Link -->\r\n          <li class=\"nav-item\">\r\n            <router-link to=\"/\" class=\"nav-link hover-effect\">\r\n              <i class=\"fas fa-home me-1\"></i> Home\r\n            </router-link>\r\n          </li>\r\n\r\n          <!-- Login/User Menu -->\r\n          <li class=\"nav-item\" v-if=\"!memName\">\r\n            <router-link to=\"/Login\" class=\"nav-link hover-effect\">\r\n              <i class=\"fas fa-sign-in-alt me-1\"></i> Login\r\n            </router-link>\r\n          </li>\r\n          \r\n          <!-- User Dropdown -->\r\n          <li class=\"nav-item dropdown\" v-else>\r\n            <div class=\"nav-link dropdown-toggle user-menu\" \r\n                 @click=\"toggleDropdown\" \r\n                 role=\"button\">\r\n              <i class=\"fas fa-user-circle me-1\"></i>\r\n              {{ memName }}\r\n            </div>\r\n            <div class=\"dropdown-menu\" :class=\"{ show: isDropdownOpen }\">\r\n              <router-link to=\"/pagemember\" class=\"dropdown-item\">\r\n                <i class=\"fas fa-user me-2\"></i> Profile\r\n              </router-link>\r\n              <div class=\"dropdown-divider\"></div>\r\n              <a @click=\"memlogout\" class=\"dropdown-item text-danger\">\r\n                <i class=\"fas fa-sign-out-alt me-2\"></i> Logout\r\n              </a>\r\n            </div>\r\n          </li>\r\n\r\n          <!-- Favorite Songs -->\r\n          <li class=\"nav-item\">\r\n            <router-link to=\"/FavoriteSongs\" class=\"nav-link hover-effect\">\r\n              <i class=\"fas fa-heart me-1\"></i> Favmusic\r\n            </router-link>\r\n          </li>\r\n        </ul>\r\n\r\n        <!-- Search and Cart -->\r\n        <div class=\"d-flex align-items-center gap-3\">\r\n          <div class=\"cart-wrapper\">\r\n            <CartInfo />\r\n          </div>\r\n          \r\n          <!-- Search Form -->\r\n          <form class=\"search-group\" @submit.prevent=\"handleSearch\">\r\n            <div class=\"search-wrapper\">\r\n              <input \r\n                type=\"search\" \r\n                class=\"search-input\" \r\n                placeholder=\"Search for music...\" \r\n                v-model=\"searchQuery\"\r\n                @keyup.enter=\"handleSearch\"\r\n              />\r\n              <button type=\"submit\" class=\"search-button\">\r\n                <i class=\"fas fa-search\"></i>\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </nav>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\naxios.defaults.withCredentials = true;\r\nimport CartInfo from './CartInfo.vue';\r\nimport { EventBus } from \"../event-bus\";\r\n\r\nexport default {\r\n  name: 'MainMenu',\r\n  components: { CartInfo },\r\n  data() {\r\n    return {\r\n      memName: null,\r\n      backendmessage: null,\r\n      searchQuery: '',\r\n      searchResults: [],\r\n      searchError: null,\r\n      isDropdownOpen: false,\r\n      isScrolled: false\r\n    }\r\n  },\r\n  mounted() {\r\n    this.memName = sessionStorage.getItem('memName');\r\n    EventBus.on('loginok', () => {\r\n      this.memName = sessionStorage.getItem('memName');\r\n    });\r\n    \r\n    // Add scroll event listener\r\n    window.addEventListener('scroll', this.handleScroll);\r\n  },\r\n  beforeUnmount() {\r\n    EventBus.off('loginok');\r\n    window.removeEventListener('scroll', this.handleScroll);\r\n  },\r\n  methods: {\r\n    handleScroll() {\r\n      this.isScrolled = window.scrollY > 0;\r\n    },\r\n    toggleDropdown() {\r\n      this.isDropdownOpen = !this.isDropdownOpen;\r\n    },\r\n    async handleSearch() {\r\n      if (!this.searchQuery.trim()) return;\r\n      \r\n      try {\r\n        const response = await axios.get(`http://localhost:3000/musics/search/${this.searchQuery}`);\r\n        if (response.data && response.data.length > 0) {\r\n          this.searchResults = response.data;\r\n          this.$router.push(`/pagemusic/${this.searchQuery}`);\r\n        } else {\r\n          this.searchError = 'ไม่สามารถพบเพลง';\r\n        }\r\n      } catch (error) {\r\n        console.error('Search error:', error);\r\n        this.searchError = 'เกิดข้อผิดพลาดในการค้นหา';\r\n      }\r\n    },\r\n    async memlogout() {\r\n      EventBus.emit('memlogout');\r\n      const cf = window.confirm('ต้องการออกจากระบบ?');\r\n      if (cf) {\r\n        try {\r\n          const response = await axios.get(`http://localhost:3000/users/logout`);\r\n          this.backendMessage = response.data.messagelogout;\r\n          if (this.backendMessage == 'success') {\r\n            sessionStorage.clear();\r\n            this.memName = null;\r\n            this.$router.push('/');\r\n          }\r\n        } catch (err) {\r\n          console.log(err);\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');\r\n@import url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css');\r\n\r\n.custom-navbar {\r\n  background: linear-gradient(135deg, #FF6B6B, #BD1D04);\r\n  font-family: 'Poppins', sans-serif;\r\n  padding: 0.8rem 1rem;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.navbar-scrolled {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  z-index: 1000;\r\n  background: rgba(189, 29, 4, 0.95);\r\n  backdrop-filter: blur(10px);\r\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.navbar-brand {\r\n  font-size: 1.5rem;\r\n  font-weight: 600;\r\n  color: white !important;\r\n  text-decoration: none;\r\n}\r\n\r\n.brand-logo {\r\n  transition: transform 0.3s ease;\r\n}\r\n\r\n.bounce-animation:hover {\r\n  animation: bounce 0.5s ease infinite;\r\n}\r\n\r\n@keyframes bounce {\r\n  0%, 100% { transform: translateY(0); }\r\n  50% { transform: translateY(-5px); }\r\n}\r\n\r\n.nav-link {\r\n  color: white !important;\r\n  font-weight: 500;\r\n  padding: 0.5rem 1rem;\r\n  transition: all 0.3s ease;\r\n  border-radius: 8px;\r\n}\r\n\r\n.hover-effect:hover {\r\n  background: rgba(255, 255, 255, 0.1);\r\n  transform: translateY(-2px);\r\n}\r\n\r\n/* User Dropdown Styles */\r\n.user-menu {\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.dropdown-menu {\r\n  background: white;\r\n  border: none;\r\n  border-radius: 12px;\r\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\r\n  padding: 0.5rem;\r\n  margin-top: 0.5rem;\r\n}\r\n\r\n.dropdown-item {\r\n  padding: 0.7rem 1rem;\r\n  border-radius: 8px;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.dropdown-item:hover {\r\n  background: #f8f9fa;\r\n  transform: translateX(5px);\r\n}\r\n\r\n/* Search Styles */\r\n.search-wrapper {\r\n  position: relative;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.search-input {\r\n  width: 300px;\r\n  height: 40px;\r\n  padding: 0.5rem 1rem;\r\n  padding-right: 3rem;\r\n  border: none;\r\n  border-radius: 20px;\r\n  background: rgba(255, 255, 255, 0.9);\r\n  transition: all 0.3s ease;\r\n  font-family: 'Poppins', sans-serif;\r\n}\r\n\r\n.search-input:focus {\r\n  outline: none;\r\n  box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.3);\r\n  background: white;\r\n  width: 320px;\r\n}\r\n\r\n.search-button {\r\n  position: absolute;\r\n  right: 5px;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  background: #BD1D04;\r\n  border: none;\r\n  border-radius: 50%;\r\n  width: 32px;\r\n  height: 32px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: white;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.search-button:hover {\r\n  background: #FF6B6B;\r\n  transform: translateY(-50%) scale(1.1);\r\n}\r\n\r\n/* Cart Wrapper */\r\n.cart-wrapper {\r\n  position: relative;\r\n  margin-right: 1rem;\r\n}\r\n\r\n/* Responsive Adjustments */\r\n@media (max-width: 991px) {\r\n  .search-input {\r\n    width: 200px;\r\n  }\r\n  \r\n  .search-input:focus {\r\n    width: 220px;\r\n  }\r\n  \r\n  .navbar-nav {\r\n    margin: 1rem 0;\r\n  }\r\n  \r\n  .dropdown-menu {\r\n    position: static !important;\r\n    float: none;\r\n    width: 100%;\r\n    margin-top: 0.5rem;\r\n  }\r\n}\r\n</style>"],"mappings":";AAyFA,OAAOA,KAAI,MAAO,OAAO;AACzBA,KAAK,CAACC,QAAQ,CAACC,eAAc,GAAI,IAAI;AACrC,OAAOC,QAAO,MAAO,gBAAgB;AACrC,SAASC,QAAO,QAAS,cAAc;AAEvC,eAAe;EACbC,IAAI,EAAE,UAAU;EAChBC,UAAU,EAAE;IAAEH;EAAS,CAAC;EACxBI,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,OAAO,EAAE,IAAI;MACbC,cAAc,EAAE,IAAI;MACpBC,WAAW,EAAE,EAAE;MACfC,aAAa,EAAE,EAAE;MACjBC,WAAW,EAAE,IAAI;MACjBC,cAAc,EAAE,KAAK;MACrBC,UAAU,EAAE;IACd;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACP,OAAM,GAAIQ,cAAc,CAACC,OAAO,CAAC,SAAS,CAAC;IAChDb,QAAQ,CAACc,EAAE,CAAC,SAAS,EAAE,MAAM;MAC3B,IAAI,CAACV,OAAM,GAAIQ,cAAc,CAACC,OAAO,CAAC,SAAS,CAAC;IAClD,CAAC,CAAC;;IAEF;IACAE,MAAM,CAACC,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAACC,YAAY,CAAC;EACtD,CAAC;EACDC,aAAaA,CAAA,EAAG;IACdlB,QAAQ,CAACmB,GAAG,CAAC,SAAS,CAAC;IACvBJ,MAAM,CAACK,mBAAmB,CAAC,QAAQ,EAAE,IAAI,CAACH,YAAY,CAAC;EACzD,CAAC;EACDI,OAAO,EAAE;IACPJ,YAAYA,CAAA,EAAG;MACb,IAAI,CAACP,UAAS,GAAIK,MAAM,CAACO,OAAM,GAAI,CAAC;IACtC,CAAC;IACDC,cAAcA,CAAA,EAAG;MACf,IAAI,CAACd,cAAa,GAAI,CAAC,IAAI,CAACA,cAAc;IAC5C,CAAC;IACD,MAAMe,YAAYA,CAAA,EAAG;MACnB,IAAI,CAAC,IAAI,CAAClB,WAAW,CAACmB,IAAI,CAAC,CAAC,EAAE;MAE9B,IAAI;QACF,MAAMC,QAAO,GAAI,MAAM9B,KAAK,CAAC+B,GAAG,CAAC,uCAAuC,IAAI,CAACrB,WAAW,EAAE,CAAC;QAC3F,IAAIoB,QAAQ,CAACvB,IAAG,IAAKuB,QAAQ,CAACvB,IAAI,CAACyB,MAAK,GAAI,CAAC,EAAE;UAC7C,IAAI,CAACrB,aAAY,GAAImB,QAAQ,CAACvB,IAAI;UAClC,IAAI,CAAC0B,OAAO,CAACC,IAAI,CAAC,cAAc,IAAI,CAACxB,WAAW,EAAE,CAAC;QACrD,OAAO;UACL,IAAI,CAACE,WAAU,GAAI,iBAAiB;QACtC;MACF,EAAE,OAAOuB,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,eAAe,EAAEA,KAAK,CAAC;QACrC,IAAI,CAACvB,WAAU,GAAI,0BAA0B;MAC/C;IACF,CAAC;IACD,MAAMyB,SAASA,CAAA,EAAG;MAChBjC,QAAQ,CAACkC,IAAI,CAAC,WAAW,CAAC;MAC1B,MAAMC,EAAC,GAAIpB,MAAM,CAACqB,OAAO,CAAC,oBAAoB,CAAC;MAC/C,IAAID,EAAE,EAAE;QACN,IAAI;UACF,MAAMT,QAAO,GAAI,MAAM9B,KAAK,CAAC+B,GAAG,CAAC,oCAAoC,CAAC;UACtE,IAAI,CAACU,cAAa,GAAIX,QAAQ,CAACvB,IAAI,CAACmC,aAAa;UACjD,IAAI,IAAI,CAACD,cAAa,IAAK,SAAS,EAAE;YACpCzB,cAAc,CAAC2B,KAAK,CAAC,CAAC;YACtB,IAAI,CAACnC,OAAM,GAAI,IAAI;YACnB,IAAI,CAACyB,OAAO,CAACC,IAAI,CAAC,GAAG,CAAC;UACxB;QACF,EAAE,OAAOU,GAAG,EAAE;UACZR,OAAO,CAACS,GAAG,CAACD,GAAG,CAAC;QAClB;MACF;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}