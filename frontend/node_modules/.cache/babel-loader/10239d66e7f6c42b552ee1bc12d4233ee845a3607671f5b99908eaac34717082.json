{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-20e30c54\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"container mt-4\"\n};\nconst _hoisted_2 = {\n  class: \"mb-4\"\n};\nconst _hoisted_3 = {\n  key: 0,\n  class: \"text-center\"\n};\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"spinner-border\",\n  role: \"status\"\n}, [/*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"visually-hidden\"\n}, \"Loading...\")], -1 /* HOISTED */));\nconst _hoisted_5 = [_hoisted_4];\nconst _hoisted_6 = {\n  key: 1,\n  class: \"alert alert-warning\",\n  role: \"alert\"\n};\nconst _hoisted_7 = {\n  key: 2,\n  class: \"alert alert-info\",\n  role: \"alert\"\n};\nconst _hoisted_8 = {\n  key: 3,\n  class: \"row row-cols-1 row-cols-md-3 g-4\"\n};\nconst _hoisted_9 = {\n  class: \"card h-100\"\n};\nconst _hoisted_10 = [\"src\", \"alt\"];\nconst _hoisted_11 = {\n  class: \"card-body\"\n};\nconst _hoisted_12 = {\n  class: \"card-title\"\n};\nconst _hoisted_13 = {\n  class: \"card-text\"\n};\nconst _hoisted_14 = {\n  class: \"card-text\"\n};\nconst _hoisted_15 = {\n  class: \"text-muted\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"h2\", _hoisted_2, \"ผลการค้นหา: \\\"\" + _toDisplayString($data.searchQuery) + \"\\\"\", 1 /* TEXT */), $data.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [..._hoisted_5])) : $data.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, _toDisplayString($data.error), 1 /* TEXT */)) : $data.searchResults.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, \" ไม่สามารถพบเพลง \")) : (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.searchResults, music => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: music.ms_id,\n      class: \"col\"\n    }, [_createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"img\", {\n      src: music.ms_image,\n      class: \"card-img-top\",\n      alt: music.ms_name\n    }, null, 8 /* PROPS */, _hoisted_10), _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"h5\", _hoisted_12, _toDisplayString(music.ms_name), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_13, _toDisplayString(music.ms_artist), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_14, [_createElementVNode(\"small\", _hoisted_15, _toDisplayString(music.ms_album), 1 /* TEXT */)])])])]);\n  }), 128 /* KEYED_FRAGMENT */))]))]);\n}","map":{"version":3,"names":["class","key","_createElementVNode","role","_hoisted_4","_createElementBlock","_hoisted_1","_hoisted_2","_toDisplayString","$data","searchQuery","loading","_hoisted_3","_hoisted_5","error","_hoisted_6","searchResults","length","_hoisted_7","_hoisted_8","_Fragment","_renderList","music","ms_id","_hoisted_9","src","ms_image","alt","ms_name","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","ms_artist","_hoisted_14","_hoisted_15","ms_album"],"sources":["/Users/addeen/Desktop/project/frontend/src/components/PageMusic.vue"],"sourcesContent":["<template>\r\n    <div class=\"container mt-4\">\r\n      <h2 class=\"mb-4\">ผลการค้นหา: \"{{ searchQuery }}\"</h2>\r\n      \r\n      <div v-if=\"loading\" class=\"text-center\">\r\n        <div class=\"spinner-border\" role=\"status\">\r\n          <span class=\"visually-hidden\">Loading...</span>\r\n        </div>\r\n      </div>\r\n  \r\n      <div v-else-if=\"error\" class=\"alert alert-warning\" role=\"alert\">\r\n        {{ error }}\r\n      </div>\r\n  \r\n      <div v-else-if=\"searchResults.length === 0\" class=\"alert alert-info\" role=\"alert\">\r\n        ไม่สามารถพบเพลง\r\n      </div>\r\n  \r\n      <div v-else class=\"row row-cols-1 row-cols-md-3 g-4\">\r\n        <div v-for=\"music in searchResults\" :key=\"music.ms_id\" class=\"col\">\r\n          <div class=\"card h-100\">\r\n            <img :src=\"music.ms_image\" class=\"card-img-top\" :alt=\"music.ms_name\">\r\n            <div class=\"card-body\">\r\n              <h5 class=\"card-title\">{{ music.ms_name }}</h5>\r\n              <p class=\"card-text\">{{ music.ms_artist }}</p>\r\n              <p class=\"card-text\"><small class=\"text-muted\">{{ music.ms_album }}</small></p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import axios from 'axios';\r\n  \r\n  export default {\r\n    name: 'SearchResults',\r\n    data() {\r\n      return {\r\n        searchResults: [],\r\n        loading: true,\r\n        error: null,\r\n        searchQuery: ''\r\n      };\r\n    },\r\n    async created() {\r\n      this.searchQuery = this.$route.params.query;\r\n      await this.fetchSearchResults();\r\n    },\r\n    watch: {\r\n      // Watch for route changes to update results when search query changes\r\n      '$route.params.query': {\r\n        handler: async function(newQuery) {\r\n          this.searchQuery = newQuery;\r\n          await this.fetchSearchResults();\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      async fetchSearchResults() {\r\n        this.loading = true;\r\n        this.error = null;\r\n        \r\n        try {\r\n          const response = await axios.get(`http://localhost:3000/musics/search/${this.searchQuery}`);\r\n          this.searchResults = response.data;\r\n        } catch (error) {\r\n          console.error('Error fetching search results:', error);\r\n          this.error = 'เกิดข้อผิดพลาดในการค้นหา กรุณาลองใหม่อีกครั้ง';\r\n        } finally {\r\n          this.loading = false;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .card-img-top {\r\n    height: 200px;\r\n    object-fit: cover;\r\n  }\r\n  </style>"],"mappings":";;;EACSA,KAAK,EAAC;AAAgB;;EACrBA,KAAK,EAAC;AAAM;;EAFtBC,GAAA;EAI0BD,KAAK,EAAC;;gEACxBE,mBAAA,CAEM;EAFDF,KAAK,EAAC,gBAAgB;EAACG,IAAI,EAAC;iBAC/BD,mBAAA,CAA+C;EAAzCF,KAAK,EAAC;AAAiB,GAAC,YAAU,E;oBAD1CI,UAEM,C;;EAPdH,GAAA;EAU6BD,KAAK,EAAC,qBAAqB;EAACG,IAAI,EAAC;;;EAV9DF,GAAA;EAckDD,KAAK,EAAC,kBAAkB;EAACG,IAAI,EAAC;;;EAdhFF,GAAA;EAkBkBD,KAAK,EAAC;;;EAETA,KAAK,EAAC;AAAY;oBApBjC;;EAsBiBA,KAAK,EAAC;AAAW;;EAChBA,KAAK,EAAC;AAAY;;EACnBA,KAAK,EAAC;AAAW;;EACjBA,KAAK,EAAC;AAAW;;EAAQA,KAAK,EAAC;AAAY;;uBAxBxDK,mBAAA,CA6BM,OA7BNC,UA6BM,GA5BJJ,mBAAA,CAAqD,MAArDK,UAAqD,EAApC,gBAAa,GAAAC,gBAAA,CAAGC,KAAA,CAAAC,WAAW,IAAG,IAAC,iBAErCD,KAAA,CAAAE,OAAO,I,cAAlBN,mBAAA,CAIM,OAJNO,UAIM,EARZ,IAAAC,UAAA,MAUsBJ,KAAA,CAAAK,KAAK,I,cAArBT,mBAAA,CAEM,OAFNU,UAEM,EAAAP,gBAAA,CADDC,KAAA,CAAAK,KAAK,oBAGML,KAAA,CAAAO,aAAa,CAACC,MAAM,U,cAApCZ,mBAAA,CAEM,OAFNa,UAEM,EAF4E,mBAElF,M,cAEAb,mBAAA,CAWM,OAXNc,UAWM,I,kBAVJd,mBAAA,CASMe,SAAA,QA5BdC,WAAA,CAmB6BZ,KAAA,CAAAO,aAAa,EAAtBM,KAAK;yBAAjBjB,mBAAA,CASM;MAT+BJ,GAAG,EAAEqB,KAAK,CAACC,KAAK;MAAEvB,KAAK,EAAC;QAC3DE,mBAAA,CAOM,OAPNsB,UAOM,GANJtB,mBAAA,CAAqE;MAA/DuB,GAAG,EAAEH,KAAK,CAACI,QAAQ;MAAE1B,KAAK,EAAC,cAAc;MAAE2B,GAAG,EAAEL,KAAK,CAACM;4BArBxEC,WAAA,GAsBY3B,mBAAA,CAIM,OAJN4B,WAIM,GAHJ5B,mBAAA,CAA+C,MAA/C6B,WAA+C,EAAAvB,gBAAA,CAArBc,KAAK,CAACM,OAAO,kBACvC1B,mBAAA,CAA8C,KAA9C8B,WAA8C,EAAAxB,gBAAA,CAAtBc,KAAK,CAACW,SAAS,kBACvC/B,mBAAA,CAA+E,KAA/EgC,WAA+E,GAA1DhC,mBAAA,CAAsD,SAAtDiC,WAAsD,EAAA3B,gBAAA,CAAzBc,KAAK,CAACc,QAAQ,iB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}