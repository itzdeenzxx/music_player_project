{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-20e30c54\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"container mt-4\"\n};\nconst _hoisted_2 = {\n  class: \"row\"\n};\nconst _hoisted_3 = {\n  key: 0,\n  class: \"col-12 mb-4\"\n};\nconst _hoisted_4 = {\n  class: \"card tomato-card\"\n};\nconst _hoisted_5 = {\n  class: \"card-body\"\n};\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  id: \"youtube-player\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"tomato-placeholder\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"tomato-icon\"\n}, \"🍅\"), /*#__PURE__*/_createElementVNode(\"h2\", null, \"Select Your Tomato Tune!\")])], -1 /* HOISTED */));\nconst _hoisted_7 = [_hoisted_6];\nconst _hoisted_8 = {\n  class: \"mt-3\"\n};\nconst _hoisted_9 = {\n  class: \"tomato-title\"\n};\nconst _hoisted_10 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"tomato-icon\"\n}, \"🍅\", -1 /* HOISTED */));\nconst _hoisted_11 = {\n  class: \"text-muted\"\n};\nconst _hoisted_12 = {\n  class: \"tomato-detail\"\n};\nconst _hoisted_13 = {\n  class: \"tomato-detail\"\n};\nconst _hoisted_14 = {\n  class: \"tomato-detail\"\n};\nconst _hoisted_15 = {\n  class: \"custom-player-controls\"\n};\nconst _hoisted_16 = {\n  class: \"timeline-container\"\n};\nconst _hoisted_17 = [\"value\", \"max\"];\nconst _hoisted_18 = {\n  class: \"time-display\"\n};\nconst _hoisted_19 = {\n  class: \"controls-container\"\n};\nconst _hoisted_20 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fas fa-redo\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_21 = [_hoisted_20];\nconst _hoisted_22 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fas fa-stop\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_23 = [_hoisted_22];\nconst _hoisted_24 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"button\", {\n  class: \"tomato-btn\"\n}, \"Hide Music Video 🍅\", -1 /* HOISTED */));\nconst _hoisted_25 = [_hoisted_24];\nconst _hoisted_26 = {\n  class: \"col-12\"\n};\nconst _hoisted_27 = {\n  class: \"mb-4 tomato-heading\"\n};\nconst _hoisted_28 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"tomato-icon\"\n}, \"🍅\", -1 /* HOISTED */));\nconst _hoisted_29 = {\n  key: 0,\n  class: \"text-center py-5\"\n};\nconst _hoisted_30 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"tomato-spinner\"\n}, \"🍅\", -1 /* HOISTED */));\nconst _hoisted_31 = [_hoisted_30];\nconst _hoisted_32 = {\n  key: 1,\n  class: \"alert alert-warning tomato-alert\",\n  role: \"alert\"\n};\nconst _hoisted_33 = {\n  key: 2,\n  class: \"alert alert-info tomato-alert\",\n  role: \"alert\"\n};\nconst _hoisted_34 = {\n  key: 3,\n  class: \"row row-cols-1 row-cols-md-3 g-4\"\n};\nconst _hoisted_35 = {\n  class: \"card h-100 music-card tomato-music-card\"\n};\nconst _hoisted_36 = {\n  class: \"card-body\"\n};\nconst _hoisted_37 = {\n  class: \"card-title\"\n};\nconst _hoisted_38 = {\n  class: \"card-text\"\n};\nconst _hoisted_39 = {\n  class: \"text-muted\"\n};\nconst _hoisted_40 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_41 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_42 = {\n  class: \"d-flex gap-2\"\n};\nconst _hoisted_43 = [\"onClick\"];\nconst _hoisted_44 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fas fa-play\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_45 = [\"onClick\"];\nconst _hoisted_46 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fas fa-heart\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_47 = [_hoisted_46];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" Music Player Section \"), $data.selectedMusic ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", {\n    class: _normalizeClass([\"youtube-container\", {\n      'no-padding': $data.noPadding\n    }])\n  }, [..._hoisted_7], 2 /* CLASS */), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"h4\", _hoisted_9, [_createTextVNode(_toDisplayString($data.selectedMusic.ms_name) + \" \", 1 /* TEXT */), _hoisted_10]), _createElementVNode(\"p\", _hoisted_11, [_createElementVNode(\"span\", _hoisted_12, \"Album: \" + _toDisplayString($data.selectedMusic.ms_album), 1 /* TEXT */), _createTextVNode(\" • \"), _createElementVNode(\"span\", _hoisted_13, \"Type: \" + _toDisplayString($data.selectedMusic.ms_type), 1 /* TEXT */), _createTextVNode(\" • \"), _createElementVNode(\"span\", _hoisted_14, \"Duration: \" + _toDisplayString($options.formatDuration($data.selectedMusic.ms_duration)), 1 /* TEXT */)]), _createCommentVNode(\" Custom Player Controls \"), _createElementVNode(\"div\", _hoisted_15, [_createCommentVNode(\" Timeline \"), _createElementVNode(\"div\", _hoisted_16, [_createElementVNode(\"input\", {\n    type: \"range\",\n    class: \"timeline\",\n    value: $data.currentTime,\n    max: $data.duration,\n    onInput: _cache[0] || (_cache[0] = (...args) => $options.handleTimelineChange && $options.handleTimelineChange(...args))\n  }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_17), _createElementVNode(\"div\", _hoisted_18, _toDisplayString($options.formatTime($data.currentTime)) + \" / \" + _toDisplayString($options.formatTime($data.duration)), 1 /* TEXT */)]), _createCommentVNode(\" Control Buttons \"), _createElementVNode(\"div\", _hoisted_19, [_createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.togglePlay && $options.togglePlay(...args)),\n    class: \"control-btn\"\n  }, [_createElementVNode(\"i\", {\n    class: _normalizeClass($data.isPlaying ? 'fas fa-pause' : 'fas fa-play')\n  }, null, 2 /* CLASS */)]), _createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.toggleLoop && $options.toggleLoop(...args)),\n    class: _normalizeClass(['control-btn', {\n      active: $data.isLooping\n    }])\n  }, [..._hoisted_21], 2 /* CLASS */), _createElementVNode(\"button\", {\n    onClick: _cache[3] || (_cache[3] = (...args) => $options.stopVideo && $options.stopVideo(...args)),\n    class: \"control-btn\"\n  }, [..._hoisted_23]), _createElementVNode(\"button\", {\n    onClick: _cache[4] || (_cache[4] = $event => $options.toggleFavorite($data.selectedMusic)),\n    class: _normalizeClass([\"control-btn\", {\n      'active': $options.isFavorite($data.selectedMusic.ms_id)\n    }])\n  }, [_createElementVNode(\"i\", {\n    class: _normalizeClass([\"fas fa-heart\", {\n      'text-danger': $options.isFavorite($data.selectedMusic.ms_id)\n    }])\n  }, null, 2 /* CLASS */)], 2 /* CLASS */)]), _createElementVNode(\"div\", {\n    onClick: _cache[5] || (_cache[5] = $event => $options.hideMV()),\n    class: \"btn-hide\"\n  }, [..._hoisted_25])])])])])])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Music Grid \"), _createElementVNode(\"div\", _hoisted_26, [_createElementVNode(\"h2\", _hoisted_27, [_createTextVNode(_toDisplayString($data.title) + \" \", 1 /* TEXT */), _hoisted_28]), $data.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_29, [..._hoisted_31])) : $data.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_32, _toDisplayString($data.error), 1 /* TEXT */)) : $data.musicList.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_33, \" ไม่พบเพลงที่ต้องการ 🍅 \")) : (_openBlock(), _createElementBlock(\"div\", _hoisted_34, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.musicList, music => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: music.ms_id,\n      class: \"col\"\n    }, [_createElementVNode(\"div\", _hoisted_35, [_createElementVNode(\"div\", _hoisted_36, [_createElementVNode(\"h5\", _hoisted_37, _toDisplayString(music.ms_name), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_38, [_createElementVNode(\"small\", _hoisted_39, [_createTextVNode(\" Album: \" + _toDisplayString(music.ms_album), 1 /* TEXT */), _hoisted_40, _createTextVNode(\" Type: \" + _toDisplayString(music.ms_type), 1 /* TEXT */), _hoisted_41, _createTextVNode(\" Duration: \" + _toDisplayString($options.formatDuration(music.ms_duration)), 1 /* TEXT */)])]), _createElementVNode(\"div\", _hoisted_42, [_createElementVNode(\"button\", {\n      onClick: $event => $options.playMusic(music),\n      class: \"tomato-play-btn flex-grow-1\"\n    }, [_hoisted_44, _createTextVNode(\" Play \")], 8 /* PROPS */, _hoisted_43), _createElementVNode(\"button\", {\n      onClick: $event => $options.toggleFavorite(music),\n      class: _normalizeClass([\"tomato-fav-btn\", $options.isFavorite(music.ms_id) ? 'active' : ''])\n    }, [..._hoisted_47], 10 /* CLASS, PROPS */, _hoisted_45)])])])]);\n  }), 128 /* KEYED_FRAGMENT */))]))])])]);\n}","map":{"version":3,"names":["class","key","_createElementVNode","id","_hoisted_6","_hoisted_20","_hoisted_22","_hoisted_24","_hoisted_30","role","_hoisted_46","_createElementBlock","_hoisted_1","_hoisted_2","_createCommentVNode","$data","selectedMusic","_hoisted_3","_hoisted_4","_hoisted_5","_normalizeClass","noPadding","_hoisted_7","_hoisted_8","_hoisted_9","_createTextVNode","_toDisplayString","ms_name","_hoisted_10","_hoisted_11","_hoisted_12","ms_album","_hoisted_13","ms_type","_hoisted_14","$options","formatDuration","ms_duration","_hoisted_15","_hoisted_16","type","value","currentTime","max","duration","onInput","_cache","args","handleTimelineChange","_hoisted_17","_hoisted_18","formatTime","_hoisted_19","onClick","togglePlay","isPlaying","toggleLoop","active","isLooping","_hoisted_21","stopVideo","_hoisted_23","$event","toggleFavorite","isFavorite","ms_id","hideMV","_hoisted_25","_hoisted_26","_hoisted_27","title","_hoisted_28","loading","_hoisted_29","_hoisted_31","error","_hoisted_32","musicList","length","_hoisted_33","_hoisted_34","_Fragment","_renderList","music","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","playMusic","_hoisted_44","_hoisted_43","_hoisted_47","_hoisted_45"],"sources":["/Users/addeen/Desktop/project/frontend/src/components/PageMusic.vue"],"sourcesContent":["<template>\r\n    <div class=\"container mt-4\">\r\n      <div class=\"row\">\r\n        <!-- Music Player Section -->\r\n        <div v-if=\"selectedMusic\" class=\"col-12 mb-4\">\r\n          <div class=\"card tomato-card\">\r\n            <div class=\"card-body\">\r\n              <div class=\"youtube-container\" :class=\"{ 'no-padding': noPadding }\">\r\n                <div id=\"youtube-player\">\r\n                  <div class=\"tomato-placeholder\">\r\n                    <div class=\"tomato-icon\">🍅</div>\r\n                    <h2>Select Your Tomato Tune!</h2>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"mt-3\">\r\n                <h4 class=\"tomato-title\">{{ selectedMusic.ms_name }} <span class=\"tomato-icon\">🍅</span></h4>\r\n                <p class=\"text-muted\">\r\n                  <span class=\"tomato-detail\">Album: {{ selectedMusic.ms_album }}</span> • \r\n                  <span class=\"tomato-detail\">Type: {{ selectedMusic.ms_type }}</span> • \r\n                  <span class=\"tomato-detail\">Duration: {{ formatDuration(selectedMusic.ms_duration) }}</span>\r\n                </p>\r\n  \r\n                <!-- Custom Player Controls -->\r\n                <div class=\"custom-player-controls\">\r\n                  <!-- Timeline -->\r\n                  <div class=\"timeline-container\">\r\n                    <input \r\n                      type=\"range\" \r\n                      class=\"timeline\" \r\n                      :value=\"currentTime\"\r\n                      :max=\"duration\"\r\n                      @input=\"handleTimelineChange\"\r\n                    >\r\n                    <div class=\"time-display\">\r\n                      {{ formatTime(currentTime) }} / {{ formatTime(duration) }}\r\n                    </div>\r\n                  </div>\r\n  \r\n                  <!-- Control Buttons -->\r\n                  <div class=\"controls-container\">\r\n                    <button @click=\"togglePlay\" class=\"control-btn\">\r\n                      <i :class=\"isPlaying ? 'fas fa-pause' : 'fas fa-play'\"></i>\r\n                    </button>\r\n                    <button @click=\"toggleLoop\" :class=\"['control-btn', { active: isLooping }]\">\r\n                      <i class=\"fas fa-redo\"></i>\r\n                    </button>\r\n                    <button @click=\"stopVideo\" class=\"control-btn\">\r\n                      <i class=\"fas fa-stop\"></i>\r\n                    </button>\r\n                    <button \r\n                      @click=\"toggleFavorite(selectedMusic)\" \r\n                      class=\"control-btn\"\r\n                      :class=\"{ 'active': isFavorite(selectedMusic.ms_id) }\"\r\n                    >\r\n                      <i class=\"fas fa-heart\" :class=\"{ 'text-danger': isFavorite(selectedMusic.ms_id) }\"></i>\r\n                    </button>\r\n                  </div>\r\n                  <div @click=\"hideMV()\" class=\"btn-hide\">\r\n                    <button class=\"tomato-btn\">Hide Music Video 🍅</button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n  \r\n        <!-- Music Grid -->\r\n        <div class=\"col-12\">\r\n          <h2 class=\"mb-4 tomato-heading\">{{ title }} <span class=\"tomato-icon\">🍅</span></h2>\r\n          \r\n          <div v-if=\"loading\" class=\"text-center py-5\">\r\n            <div class=\"tomato-spinner\">🍅</div>\r\n          </div>\r\n  \r\n          <div v-else-if=\"error\" class=\"alert alert-warning tomato-alert\" role=\"alert\">\r\n            {{ error }}\r\n          </div>\r\n  \r\n          <div v-else-if=\"musicList.length === 0\" class=\"alert alert-info tomato-alert\" role=\"alert\">\r\n            ไม่พบเพลงที่ต้องการ 🍅\r\n          </div>\r\n        \r\n          <div v-else class=\"row row-cols-1 row-cols-md-3 g-4\">\r\n            <div v-for=\"music in musicList\" :key=\"music.ms_id\" class=\"col\">\r\n              <div class=\"card h-100 music-card tomato-music-card\">\r\n                <div class=\"card-body\">\r\n                  <h5 class=\"card-title\">{{ music.ms_name }}</h5>\r\n                  <p class=\"card-text\">\r\n                    <small class=\"text-muted\">\r\n                      Album: {{ music.ms_album }}<br>\r\n                      Type: {{ music.ms_type }}<br>\r\n                      Duration: {{ formatDuration(music.ms_duration) }}\r\n                    </small>\r\n                  </p>\r\n                  <div class=\"d-flex gap-2\">\r\n                    <button \r\n                      @click=\"playMusic(music)\" \r\n                      class=\"tomato-play-btn flex-grow-1\"\r\n                    >\r\n                      <i class=\"fas fa-play\"></i> Play\r\n                    </button>\r\n                    <button \r\n                      @click=\"toggleFavorite(music)\"\r\n                      class=\"tomato-fav-btn\"\r\n                      :class=\"isFavorite(music.ms_id) ? 'active' : ''\"\r\n                    >\r\n                      <i class=\"fas fa-heart\"></i>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n import axios from 'axios';\r\nimport '@fortawesome/fontawesome-free/css/all.min.css';\r\naxios.defaults.withCredentials = true\r\n\r\n\r\nexport default {\r\n  name: 'PageMusic',\r\n  data() {\r\n    return {\r\n      musicList: [],\r\n      selectedMusic: null,\r\n      loading: true,\r\n      error: null,\r\n      title: 'All Music',\r\n      player: null,\r\n      isPlaying: false,\r\n      isLooping: false,\r\n      currentTime: 0,\r\n      duration: 0,\r\n      timeUpdateInterval: null,\r\n      noPadding: false,\r\n      favorites: new Set(),\r\n    };\r\n  },async mounted() {\r\n    await this.chkSession()\r\n  },\r\n\r\n  async created() {\r\n    try {\r\n      this.loadYouTubeAPI();\r\n      await this.fetchAllMusic();\r\n      await this.fetchFavorites();\r\n      \r\n      const searchQuery = this.$route.params.query;\r\n      if (searchQuery) {\r\n        this.title = `Search Results: \"${searchQuery}\"`;\r\n        await this.searchMusic(searchQuery);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error in component creation:', error);\r\n      this.error = 'An error occurred while loading the application.';\r\n    }\r\n  },\r\n    methods: {\r\n        async chkSession() {\r\n    try {\r\n        const res = await axios.get('http://localhost:3000/users/getss');\r\n        if (res.data && res.data.id) {\r\n            this.userId = res.data.id;\r\n            this.memEmail = res.data.email;\r\n            this.memName = res.data.name;\r\n            console.log(\"User ID:\", this.userId);\r\n        } else {\r\n            console.warn(\"User ID not found in session data:\", res.data);\r\n            this.error = 'User ID not found in session.';\r\n        }\r\n    } catch (err) {\r\n        console.error('Error fetching session:', err);\r\n        this.error = 'Failed to load session data.';\r\n    }\r\n}\r\n,\r\n      loadYouTubeAPI() {\r\n        if (!window.YT) {\r\n          const tag = document.createElement('script');\r\n          tag.src = 'https://www.youtube.com/iframe_api';\r\n          const firstScriptTag = document.getElementsByTagName('script')[0];\r\n          firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\r\n  \r\n          window.onYouTubeIframeAPIReady = () => {\r\n            this.initializeYouTubePlayer();\r\n          };\r\n        } else {\r\n          this.initializeYouTubePlayer();\r\n        }\r\n      },\r\n      initializeYouTubePlayer() {\r\n        if (this.selectedMusic) {\r\n          const videoId = this.extractVideoId(this.selectedMusic.ms_path);\r\n          this.player = new window.YT.Player('youtube-player', {\r\n            height: '720',\r\n            width: '1280',\r\n            videoId: videoId,\r\n            playerVars: {\r\n              controls: 0,\r\n              disablekb: 1,\r\n              enablejsapi: 1,\r\n              modestbranding: 1,\r\n              rel: 0,\r\n              showinfo: 0,\r\n              autoplay: 1\r\n            },\r\n            events: {\r\n              onReady: this.onPlayerReady,\r\n              onStateChange: this.onPlayerStateChange\r\n            }\r\n          });\r\n        }\r\n      },\r\n      onPlayerReady(event) {\r\n        event.target.playVideo();\r\n        this.duration = this.player.getDuration();\r\n        this.startTimeUpdate();\r\n      },\r\n      onPlayerStateChange(event) {\r\n        this.isPlaying = event.data === window.YT.PlayerState.PLAYING;\r\n        \r\n        // Handle loop\r\n        if (event.data === window.YT.PlayerState.ENDED && this.isLooping) {\r\n          this.player.seekTo(0);\r\n          this.player.playVideo();\r\n        }\r\n      },\r\n      startTimeUpdate() {\r\n        this.timeUpdateInterval = setInterval(() => {\r\n          if (this.player && this.isPlaying) {\r\n            this.currentTime = this.player.getCurrentTime();\r\n          }\r\n        }, 1000);\r\n      },\r\n      async fetchAllMusic() {\r\n        this.loading = true;\r\n        try {\r\n          const response = await axios.get('http://localhost:3000/musics');\r\n          this.musicList = response.data;\r\n        } catch (error) {\r\n          console.error('Error fetching music:', error);\r\n          this.error = 'Failed to load music. Please try again later.';\r\n        } finally {\r\n          this.loading = false;\r\n        }\r\n      },\r\n      async searchMusic(query) {\r\n        this.loading = true;\r\n        try {\r\n          const response = await axios.get(`http://localhost:3000/musics/search/${query}`);\r\n          this.musicList = response.data;\r\n        } catch (error) {\r\n          console.error('Error searching music:', error);\r\n          this.error = 'Failed to search music. Please try again later.';\r\n        } finally {\r\n          this.loading = false;\r\n        }\r\n      },\r\n      extractVideoId(url) {\r\n        const regex = /(?:embed\\/|v=|\\/)([\\w-]{11})/;\r\n        const match = url.match(regex);\r\n        return match ? match[1] : null;\r\n      },\r\n      playMusic(music) {\r\n        this.selectedMusic = music;\r\n        if (this.player) {\r\n          this.player.destroy();\r\n        }\r\n        this.initializeYouTubePlayer();\r\n        window.scrollTo({ top: 0, behavior: 'smooth' });\r\n      },\r\n      togglePlay() {\r\n        try {\r\n          if (this.isPlaying) {\r\n            this.player.pauseVideo();\r\n          } else {\r\n            this.player.playVideo();\r\n          }\r\n        } catch (err) {\r\n          alert(\"Please select music\");\r\n        }\r\n      },\r\n      toggleLoop() {\r\n        this.isLooping = !this.isLooping;\r\n      },\r\n      stopVideo() {\r\n        try {\r\n          if (this.player) {\r\n            this.player.stopVideo();\r\n          }\r\n        } catch (err) {\r\n          alert(\"Please select music\");\r\n        }\r\n      },\r\n      handleTimelineChange(event) {\r\n        const newTime = event.target.value;\r\n        this.player.seekTo(newTime);\r\n      },\r\n      formatTime(seconds) {\r\n        const minutes = Math.floor(seconds / 60);\r\n        const secs = Math.floor(seconds % 60);\r\n        return `${minutes}:${secs < 10 ? '0' : ''}${secs}`;\r\n      },\r\n      formatDuration(duration) {\r\n        const minutes = Math.floor(duration / 60);\r\n        const secs = Math.floor(duration % 60);\r\n        return `${minutes}:${secs < 10 ? '0' : ''}${secs}`;\r\n      },\r\n      isFavorite(musicId) {\r\n      return this.favorites.has(musicId);\r\n    },\r\n\r\n    async fetchFavorites() {\r\n      try {\r\n        // Fix: Update endpoint URL\r\n        const response = await axios.post('http://localhost:3000/favs/getfavsbyuser', {\r\n          id: this.userId\r\n        });\r\n        \r\n        if (response.data && Array.isArray(response.data)) {\r\n          // Add debugging log\r\n          console.log('Favorites data received:', response.data);\r\n          \r\n          // Convert favorite data to Set of music IDs\r\n          this.favorites = new Set(response.data.map(fav => fav.ms_id));\r\n          \r\n          // Add debugging log\r\n          console.log('Favorites set created:', Array.from(this.favorites));\r\n        } else {\r\n          console.warn('Unexpected favorites data format:', response.data);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching favorites:', error);\r\n        // Add more detailed error logging\r\n        if (error.response) {\r\n          console.error('Error response:', error.response.data);\r\n          console.error('Error status:', error.response.status);\r\n        }\r\n        this.error = 'Failed to load favorites';\r\n      }\r\n    },hideMV(){\r\n        console.log(\"in func\")\r\n        this.noPadding = !this.noPadding;\r\n      },\r\n\r\n    async toggleFavorite(music) {\r\n      if (!music?.ms_id) {\r\n        console.error('Invalid music selection');\r\n        return;\r\n      }\r\n\r\n      try {\r\n        if (this.isFavorite(music.ms_id)) {\r\n          // Remove from favorites\r\n          const response = await axios.get(`http://localhost:3000/favs/getfavsdtl/${music.ms_id}`, {\r\n            params: { userId: this.userId }\r\n          });\r\n\r\n          if (response.data.deleteOK) {\r\n            const newFavorites = new Set(this.favorites);\r\n            newFavorites.delete(music.ms_id);\r\n            this.favorites = newFavorites;\r\n            console.log('Removed from favorites:', music.ms_id);\r\n          } else {\r\n            throw new Error(response.data.message || 'Failed to remove from favorites');\r\n          }\r\n        } else {\r\n          // Add to favorites\r\n          const response = await axios.post('http://localhost:3000/favs/addfavs', {\r\n            userId: this.userId,\r\n            musicId: music.ms_id\r\n          });\r\n\r\n          if (response.data.favoriteOK) {\r\n            const newFavorites = new Set(this.favorites);\r\n            newFavorites.add(music.ms_id);\r\n            this.favorites = newFavorites;\r\n            console.log('Added to favorites:', music.ms_id);\r\n          } else {\r\n            throw new Error(response.data.messageAddFavorite || 'Failed to add to favorites');\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('Error updating favorites:', error);\r\n        if (error.response) {\r\n          console.error('Error response:', error.response.data);\r\n          console.error('Error status:', error.response.status);\r\n        }\r\n        this.error = error.response?.data?.error || error.message || 'Failed to update favorites';\r\n      }\r\n    },\r\n\r\n    \r\n    }\r\n  };\r\n  </script>\r\n \r\n  \r\n <style scoped>\r\n .tomato-card {\r\n   border: 2px solid #ff6b6b;\r\n   border-radius: 20px;\r\n   box-shadow: 0 4px 12px rgba(255, 107, 107, 0.1);\r\n }\r\n \r\n .tomato-placeholder {\r\n   display: flex;\r\n   flex-direction: column;\r\n   align-items: center;\r\n   justify-content: center;\r\n   height: 200px;\r\n   background-color: #fff5f5;\r\n   border-radius: 15px;\r\n }\r\n \r\n .tomato-icon {\r\n   font-size: 2rem;\r\n   margin-bottom: 1rem;\r\n }\r\n \r\n .tomato-title {\r\n   color: #ff6b6b;\r\n   font-weight: 600;\r\n }\r\n \r\n .tomato-heading {\r\n   color: #ff6b6b;\r\n   font-weight: 600;\r\n   display: flex;\r\n   align-items: center;\r\n   gap: 0.5rem;\r\n }\r\n \r\n .tomato-spinner {\r\n   font-size: 3rem;\r\n   animation: spin 2s linear infinite;\r\n }\r\n \r\n @keyframes spin {\r\n   from { transform: rotate(0deg); }\r\n   to { transform: rotate(360deg); }\r\n }\r\n \r\n .tomato-alert {\r\n   border: none;\r\n   background-color: #fff5f5;\r\n   color: #ff6b6b;\r\n   border-radius: 15px;\r\n }\r\n \r\n .tomato-music-card {\r\n   border: 2px solid #ffd8d8;\r\n   border-radius: 15px;\r\n   transition: all 0.3s ease;\r\n }\r\n \r\n .tomato-music-card:hover {\r\n   transform: translateY(-5px);\r\n   border-color: #ff6b6b;\r\n   box-shadow: 0 4px 12px rgba(255, 107, 107, 0.15);\r\n }\r\n \r\n .tomato-play-btn {\r\n   background-color: #ff6b6b;\r\n   color: white;\r\n   border: none;\r\n   border-radius: 25px;\r\n   padding: 8px 16px;\r\n   transition: all 0.3s ease;\r\n }\r\n \r\n .tomato-play-btn:hover {\r\n   background-color: #ff5252;\r\n   transform: scale(1.02);\r\n }\r\n \r\n .tomato-fav-btn {\r\n   background-color: #fff5f5;\r\n   color: #ff6b6b;\r\n   border: 2px solid #ff6b6b;\r\n   border-radius: 50%;\r\n   width: 40px;\r\n   height: 40px;\r\n   display: flex;\r\n   align-items: center;\r\n   justify-content: center;\r\n   transition: all 0.3s ease;\r\n }\r\n \r\n .tomato-fav-btn.active {\r\n   background-color: #ff6b6b;\r\n   color: white;\r\n }\r\n \r\n .tomato-btn {\r\n   border: none;\r\n   color: white;\r\n   background-color: #ff6b6b;\r\n   border-radius: 25px;\r\n   font-family: inherit;\r\n   font-size: 17px;\r\n   padding: 0.6em 1.5em;\r\n   transition: all 0.3s ease;\r\n }\r\n \r\n .tomato-btn:hover {\r\n   background-color: #ff5252;\r\n   transform: scale(1.05);\r\n   box-shadow: 0 4px 12px rgba(255, 107, 107, 0.2);\r\n }\r\n \r\n .timeline {\r\n   width: 100%;\r\n   height: 4px;\r\n   background: #ffd8d8;\r\n   border-radius: 2px;\r\n   cursor: pointer;\r\n   margin-bottom: 0.5rem;\r\n }\r\n \r\n .timeline::-webkit-slider-thumb {\r\n   background: #ff6b6b;\r\n }\r\n \r\n .timeline::-moz-range-thumb {\r\n   background: #ff6b6b;\r\n }\r\n \r\n .control-btn {\r\n   color: #ff6b6b;\r\n   border: 2px solid #ffd8d8;\r\n   border-radius: 50%;\r\n   width: 40px;\r\n   height: 40px;\r\n   transition: all 0.3s ease;\r\n }\r\n \r\n .control-btn:hover {\r\n   background: #fff5f5;\r\n   border-color: #ff6b6b;\r\n }\r\n \r\n .control-btn.active {\r\n   color: white;\r\n   background: #ff6b6b;\r\n   border-color: #ff6b6b;\r\n }\r\n \r\n .custom-player-controls {\r\n   background: #fff5f5;\r\n   border-radius: 15px;\r\n   padding: 1.5rem;\r\n   margin-top: 1.5rem;\r\n }\r\n \r\n .time-display {\r\n   color: #ff6b6b;\r\n   font-size: 0.9rem;\r\n }\r\n \r\n .tomato-detail {\r\n   background-color: #fff5f5;\r\n   padding: 4px 8px;\r\n   border-radius: 12px;\r\n   font-size: 0.9rem;\r\n }\r\n </style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}